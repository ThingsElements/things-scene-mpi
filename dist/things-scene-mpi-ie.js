!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e){t.exports=scene},function(t,e,i){var n=i(3),o=i(4);t.exports=function(t,e,i){var s=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||n)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var a=0;a<16;++a)e[s+a]=r[a];return e||o(r)}},function(t,e,i){t.exports=i(5)},function(t,e){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var n=new Uint8Array(16);t.exports=function(){return i(n),n}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,o=i;return[o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]]].join("")}},function(t,e,i){"use strict";i.r(e);var n=i(0);
/*!
 * segment-display.js
 *
 * Copyright 2012, RÃ¼diger Appel
 * http://www.3quarks.com
 * Published under Creative Commons 3.0 License.
 *
 * Date: 2012-02-14
 * Version: 1.0.0
 *
 * Dokumentation: http://www.3quarks.com/de/Segmentanzeige
 * Documentation: http://www.3quarks.com/en/SegmentDisplay
 */function o(t,e){this.width=t,this.height=e,this.pattern="##:##:##",this.value="12:34:56",this.digitHeight=20,this.digitWidth=10,this.digitDistance=2.5,this.displayAngle=12,this.segmentWidth=2.5,this.segmentDistance=.2,this.segmentCount=o.SevenSegment,this.cornerType=o.RoundedCorner,this.colorOn="rgb(233, 93, 15)",this.colorOff="rgb(75, 30, 5)"}o.SevenSegment=7,o.FourteenSegment=14,o.SixteenSegment=16,o.SymmetricCorner=0,o.SquaredCorner=1,o.RoundedCorner=2,o.prototype.setValue=function(t){this.value=t},o.prototype.draw=function(t){var e=0,i=!0;if(this.pattern)for(var n=0;n<this.pattern.length;n++){var o=this.pattern.charAt(n).toLowerCase();if("#"==o)e+=this.digitWidth;else if("."==o||":"==o)e+=this.segmentWidth;else if(" "!=o)return;e+=i?0:this.digitDistance,i=!1}if(!(e<=0)){var s=-1*Math.max(-45,Math.min(45,this.displayAngle)),r=Math.tan(s*Math.PI/180),a=Math.min(this.width/(e+Math.abs(r*this.digitHeight)),this.height/this.digitHeight),l=(this.width-(e+r*this.digitHeight)*a)/2,h=(this.height-this.digitHeight*a)/2;t.save(),t.translate(l,h),t.scale(a,a),t.transform(1,0,r,1,0,0);var d=0,c=this.value?this.value.length:0;for(n=0;n<this.pattern.length;n++){var g=this.pattern.charAt(n),u=n<c?this.value.charAt(n).toLowerCase():" ";d+=this.drawDigit(t,d,g,u)}t.restore()}},o.prototype.drawDigit=function(t,e,i,n){switch(i){case"#":var s=Math.sqrt(this.segmentWidth*this.segmentWidth/2),r=Math.sqrt(this.segmentDistance*this.segmentDistance/2),a=r/2,l=(this.segmentWidth-r)*Math.sin(45*Math.PI/180),h=l/2,d=(this.digitHeight-3*this.segmentWidth)/2,c=(this.digitWidth-3*this.segmentWidth)/2,g=this.segmentWidth/2,u=this.digitWidth/2;if(16==this.segmentCount){var f=e,m=0;switch(t.fillStyle=this.getSegmentColor(n,null,"02356789abcdefgiopqrstz@%"),t.beginPath(),this.cornerType){case o.SymmetricCorner:t.moveTo(f+g+r,m+g),t.lineTo(f+this.segmentWidth+r,m);break;case o.SquaredCorner:t.moveTo(f+g+a,m+g-a),t.lineTo(f+this.segmentWidth,m);break;default:t.moveTo(f+this.segmentWidth-l,m+this.segmentWidth-l-r),t.quadraticCurveTo(f+this.segmentWidth-h,m,f+this.segmentWidth,m)}t.lineTo(f+u-r-g,m),t.lineTo(f+u-r,m+g),t.lineTo(f+u-r-g,m+this.segmentWidth),t.lineTo(f+this.segmentWidth+r,m+this.segmentWidth),t.fill();f=e,m=0;switch(t.fillStyle=this.getSegmentColor(n,null,"02356789abcdefgiopqrstz@"),t.beginPath(),t.moveTo(f+this.digitWidth-this.segmentWidth-r,m+this.segmentWidth),t.lineTo(f+u+r+g,m+this.segmentWidth),t.lineTo(f+u+r,m+g),t.lineTo(f+u+r+g,m),this.cornerType){case o.SymmetricCorner:t.lineTo(f+this.digitWidth-this.segmentWidth-r,m),t.lineTo(f+this.digitWidth-g-r,m+g);break;case o.SquaredCorner:t.lineTo(f+this.digitWidth-this.segmentWidth,m),t.lineTo(f+this.digitWidth-g-a,m+g-a);break;default:t.lineTo(f+this.digitWidth-this.segmentWidth,m),t.quadraticCurveTo(f+this.digitWidth-this.segmentWidth+h,m,f+this.digitWidth-this.segmentWidth+l,m+this.segmentWidth-l-r)}t.fill()}else{f=e,m=0;switch(t.fillStyle=this.getSegmentColor(n,"02356789acefp","02356789abcdefgiopqrstz@"),t.beginPath(),this.cornerType){case o.SymmetricCorner:t.moveTo(f+g+r,m+g),t.lineTo(f+this.segmentWidth+r,m),t.lineTo(f+this.digitWidth-this.segmentWidth-r,m),t.lineTo(f+this.digitWidth-g-r,m+g);break;case o.SquaredCorner:t.moveTo(f+g+a,m+g-a),t.lineTo(f+this.segmentWidth,m),t.lineTo(f+this.digitWidth-this.segmentWidth,m),t.lineTo(f+this.digitWidth-g-a,m+g-a);break;default:t.moveTo(f+this.segmentWidth-l,m+this.segmentWidth-l-r),t.quadraticCurveTo(f+this.segmentWidth-h,m,f+this.segmentWidth,m),t.lineTo(f+this.digitWidth-this.segmentWidth,m),t.quadraticCurveTo(f+this.digitWidth-this.segmentWidth+h,m,f+this.digitWidth-this.segmentWidth+l,m+this.segmentWidth-l-r)}t.lineTo(f+this.digitWidth-this.segmentWidth-r,m+this.segmentWidth),t.lineTo(f+this.segmentWidth+r,m+this.segmentWidth),t.fill()}switch(f=e+this.digitWidth-this.segmentWidth,m=0,t.fillStyle=this.getSegmentColor(n,"01234789adhpy","01234789abdhjmnopqruwy"),t.beginPath(),this.cornerType){case o.SymmetricCorner:t.moveTo(f+g,m+g+r),t.lineTo(f+this.segmentWidth,m+this.segmentWidth+r);break;case o.SquaredCorner:t.moveTo(f+g+a,m+g+a),t.lineTo(f+this.segmentWidth,m+this.segmentWidth);break;default:t.moveTo(f+l+r,m+this.segmentWidth-l),t.quadraticCurveTo(f+this.segmentWidth,m+this.segmentWidth-h,f+this.segmentWidth,m+this.segmentWidth)}switch(t.lineTo(f+this.segmentWidth,m+d+this.segmentWidth-r),t.lineTo(f+g,m+d+this.segmentWidth+g-r),t.lineTo(f,m+d+this.segmentWidth-r),t.lineTo(f,m+this.segmentWidth+r),t.fill(),f=e+this.digitWidth-this.segmentWidth,m=d+this.segmentWidth,t.fillStyle=this.getSegmentColor(n,"013456789abdhnouy","01346789abdghjmnoqsuw@","%"),t.beginPath(),t.moveTo(f,m+this.segmentWidth+r),t.lineTo(f+g,m+g+r),t.lineTo(f+this.segmentWidth,m+this.segmentWidth+r),t.lineTo(f+this.segmentWidth,m+d+this.segmentWidth-r),this.cornerType){case o.SymmetricCorner:t.lineTo(f+g,m+d+this.segmentWidth+g-r),t.lineTo(f,m+d+this.segmentWidth-r);break;case o.SquaredCorner:t.lineTo(f+g+a,m+d+this.segmentWidth+g-a),t.lineTo(f,m+d+this.segmentWidth-r);break;default:t.quadraticCurveTo(f+this.segmentWidth,m+d+this.segmentWidth+h,f+l+r,m+d+this.segmentWidth+l),t.lineTo(f,m+d+this.segmentWidth-r)}if(t.fill(),16==this.segmentCount){switch(f=e,m=this.digitHeight-this.segmentWidth,t.fillStyle=this.getSegmentColor(n,null,"0235689bcdegijloqsuz_=@"),t.beginPath(),t.moveTo(f+this.segmentWidth+r,m),t.lineTo(f+u-r-g,m),t.lineTo(f+u-r,m+g),t.lineTo(f+u-r-g,m+this.segmentWidth),this.cornerType){case o.SymmetricCorner:t.lineTo(f+this.segmentWidth+r,m+this.segmentWidth),t.lineTo(f+g+r,m+g);break;case o.SquaredCorner:t.lineTo(f+this.segmentWidth,m+this.segmentWidth),t.lineTo(f+g+a,m+g+a);break;default:t.lineTo(f+this.segmentWidth,m+this.segmentWidth),t.quadraticCurveTo(f+this.segmentWidth-h,m+this.segmentWidth,f+this.segmentWidth-l,m+l+r),t.lineTo(f+this.segmentWidth-l,m+l+r)}switch(t.fill(),f=e,m=this.digitHeight-this.segmentWidth,t.fillStyle=this.getSegmentColor(n,null,"0235689bcdegijloqsuz_=@","%"),t.beginPath(),t.moveTo(f+u+r+g,m+this.segmentWidth),t.lineTo(f+u+r,m+g),t.lineTo(f+u+r+g,m),t.lineTo(f+this.digitWidth-this.segmentWidth-r,m),this.cornerType){case o.SymmetricCorner:t.lineTo(f+this.digitWidth-g-r,m+g),t.lineTo(f+this.digitWidth-this.segmentWidth-r,m+this.segmentWidth);break;case o.SquaredCorner:t.lineTo(f+this.digitWidth-g-a,m+g+a),t.lineTo(f+this.digitWidth-this.segmentWidth,m+this.segmentWidth);break;default:t.lineTo(f+this.digitWidth-this.segmentWidth+l,m+l+r),t.quadraticCurveTo(f+this.digitWidth-this.segmentWidth+h,m+this.segmentWidth,f+this.digitWidth-this.segmentWidth,m+this.segmentWidth)}t.fill()}else{switch(f=e,m=this.digitHeight-this.segmentWidth,t.fillStyle=this.getSegmentColor(n,"0235689bcdelotuy_","0235689bcdegijloqsuz_=@"),t.beginPath(),t.moveTo(f+this.segmentWidth+r,m),t.lineTo(f+this.digitWidth-this.segmentWidth-r,m),this.cornerType){case o.SymmetricCorner:t.lineTo(f+this.digitWidth-g-r,m+g),t.lineTo(f+this.digitWidth-this.segmentWidth-r,m+this.segmentWidth),t.lineTo(f+this.segmentWidth+r,m+this.segmentWidth),t.lineTo(f+g+r,m+g);break;case o.SquaredCorner:t.lineTo(f+this.digitWidth-g-a,m+g+a),t.lineTo(f+this.digitWidth-this.segmentWidth,m+this.segmentWidth),t.lineTo(f+this.segmentWidth,m+this.segmentWidth),t.lineTo(f+g+a,m+g+a);break;default:t.lineTo(f+this.digitWidth-this.segmentWidth+l,m+l+r),t.quadraticCurveTo(f+this.digitWidth-this.segmentWidth+h,m+this.segmentWidth,f+this.digitWidth-this.segmentWidth,m+this.segmentWidth),t.lineTo(f+this.segmentWidth,m+this.segmentWidth),t.quadraticCurveTo(f+this.segmentWidth-h,m+this.segmentWidth,f+this.segmentWidth-l,m+l+r),t.lineTo(f+this.segmentWidth-l,m+l+r)}t.fill()}switch(f=e,m=d+this.segmentWidth,t.fillStyle=this.getSegmentColor(n,"0268abcdefhlnoprtu","0268acefghjklmnopqruvw@"),t.beginPath(),t.moveTo(f,m+this.segmentWidth+r),t.lineTo(f+g,m+g+r),t.lineTo(f+this.segmentWidth,m+this.segmentWidth+r),t.lineTo(f+this.segmentWidth,m+d+this.segmentWidth-r),this.cornerType){case o.SymmetricCorner:t.lineTo(f+g,m+d+this.segmentWidth+g-r),t.lineTo(f,m+d+this.segmentWidth-r);break;case o.SquaredCorner:t.lineTo(f+g-a,m+d+this.segmentWidth+g-r+a),t.lineTo(f,m+d+this.segmentWidth);break;default:t.lineTo(f+this.segmentWidth-l-r,m+d+this.segmentWidth+l),t.quadraticCurveTo(f,m+d+this.segmentWidth+h,f,m+d+this.segmentWidth)}switch(t.fill(),f=e,m=0,t.fillStyle=this.getSegmentColor(n,"045689abcefhlpty","045689acefghklmnopqrsuvwy@","%"),t.beginPath(),t.moveTo(f+this.segmentWidth,m+this.segmentWidth+r),t.lineTo(f+this.segmentWidth,m+d+this.segmentWidth-r),t.lineTo(f+g,m+d+this.segmentWidth+g-r),t.lineTo(f,m+d+this.segmentWidth-r),this.cornerType){case o.SymmetricCorner:t.lineTo(f,m+this.segmentWidth+r),t.lineTo(f+g,m+g+r);break;case o.SquaredCorner:t.lineTo(f,m+this.segmentWidth),t.lineTo(f+g-a,m+g+a);break;default:t.lineTo(f,m+this.segmentWidth),t.quadraticCurveTo(f,m+this.segmentWidth-h,f+this.segmentWidth-l-r,m+this.segmentWidth-l),t.lineTo(f+this.segmentWidth-l-r,m+this.segmentWidth-l)}return t.fill(),7==this.segmentCount&&(f=e,m=(this.digitHeight-this.segmentWidth)/2,t.fillStyle=this.getSegmentColor(n,"2345689abdefhnoprty-="),t.beginPath(),t.moveTo(f+g+r,m+g),t.lineTo(f+this.segmentWidth+r,m),t.lineTo(f+this.digitWidth-this.segmentWidth-r,m),t.lineTo(f+this.digitWidth-g-r,m+g),t.lineTo(f+this.digitWidth-this.segmentWidth-r,m+this.segmentWidth),t.lineTo(f+this.segmentWidth+r,m+this.segmentWidth),t.fill()),7!=this.segmentCount&&(f=e,m=(this.digitHeight-this.segmentWidth)/2,t.fillStyle=this.getSegmentColor(n,null,"2345689aefhkprsy-+*=","%"),t.beginPath(),t.moveTo(f+g+r,m+g),t.lineTo(f+this.segmentWidth+r,m),t.lineTo(f+u-r-g,m),t.lineTo(f+u-r,m+g),t.lineTo(f+u-r-g,m+this.segmentWidth),t.lineTo(f+this.segmentWidth+r,m+this.segmentWidth),t.fill(),f=e,m=(this.digitHeight-this.segmentWidth)/2,t.fillStyle=this.getSegmentColor(n,null,"234689abefghprsy-+*=@","%"),t.beginPath(),t.moveTo(f+u+r,m+g),t.lineTo(f+u+r+g,m),t.lineTo(f+this.digitWidth-this.segmentWidth-r,m),t.lineTo(f+this.digitWidth-g-r,m+g),t.lineTo(f+this.digitWidth-this.segmentWidth-r,m+this.segmentWidth),t.lineTo(f+u+r+g,m+this.segmentWidth),t.fill(),f=e+u-g,m=0,t.fillStyle=this.getSegmentColor(n,null,"bdit+*","%"),t.beginPath(),14==this.segmentCount?(t.moveTo(f,m+this.segmentWidth+this.segmentDistance),t.lineTo(f+this.segmentWidth,m+this.segmentWidth+this.segmentDistance)):(t.moveTo(f,m+this.segmentWidth+r),t.lineTo(f+g,m+g+r),t.lineTo(f+this.segmentWidth,m+this.segmentWidth+r)),t.lineTo(f+this.segmentWidth,m+d+this.segmentWidth-r),t.lineTo(f+g,m+d+this.segmentWidth+g-r),t.lineTo(f,m+d+this.segmentWidth-r),t.fill(),f=e+u-g,m=this.digitHeight,t.fillStyle=this.getSegmentColor(n,null,"bdity+*@","%"),t.beginPath(),14==this.segmentCount?(t.moveTo(f,m-this.segmentWidth-this.segmentDistance),t.lineTo(f+this.segmentWidth,m-this.segmentWidth-this.segmentDistance)):(t.moveTo(f,m-this.segmentWidth-r),t.lineTo(f+g,m-g-r),t.lineTo(f+this.segmentWidth,m-this.segmentWidth-r)),t.lineTo(f+this.segmentWidth,m-d-this.segmentWidth+r),t.lineTo(f+g,m-d-this.segmentWidth-g+r),t.lineTo(f,m-d-this.segmentWidth+r),t.fill(),f=e+this.segmentWidth,m=this.segmentWidth,t.fillStyle=this.getSegmentColor(n,null,"mnx\\*"),t.beginPath(),t.moveTo(f+this.segmentDistance,m+this.segmentDistance),t.lineTo(f+this.segmentDistance+s,m+this.segmentDistance),t.lineTo(f+c-this.segmentDistance,m+d-this.segmentDistance-s),t.lineTo(f+c-this.segmentDistance,m+d-this.segmentDistance),t.lineTo(f+c-this.segmentDistance-s,m+d-this.segmentDistance),t.lineTo(f+this.segmentDistance,m+this.segmentDistance+s),t.fill(),f=e+c+2*this.segmentWidth,m=this.segmentWidth,t.fillStyle=this.getSegmentColor(n,null,"0kmvxz/*","%"),t.beginPath(),t.moveTo(f+c-this.segmentDistance,m+this.segmentDistance),t.lineTo(f+c-this.segmentDistance,m+this.segmentDistance+s),t.lineTo(f+this.segmentDistance+s,m+d-this.segmentDistance),t.lineTo(f+this.segmentDistance,m+d-this.segmentDistance),t.lineTo(f+this.segmentDistance,m+d-this.segmentDistance-s),t.lineTo(f+c-this.segmentDistance-s,m+this.segmentDistance),t.fill(),f=e+c+2*this.segmentWidth,m=d+2*this.segmentWidth,t.fillStyle=this.getSegmentColor(n,null,"5knqrwx\\*"),t.beginPath(),t.moveTo(f+this.segmentDistance,m+this.segmentDistance),t.lineTo(f+this.segmentDistance+s,m+this.segmentDistance),t.lineTo(f+c-this.segmentDistance,m+d-this.segmentDistance-s),t.lineTo(f+c-this.segmentDistance,m+d-this.segmentDistance),t.lineTo(f+c-this.segmentDistance-s,m+d-this.segmentDistance),t.lineTo(f+this.segmentDistance,m+this.segmentDistance+s),t.fill(),f=e+this.segmentWidth,m=d+2*this.segmentWidth,t.fillStyle=this.getSegmentColor(n,null,"0vwxz/*","%"),t.beginPath(),t.moveTo(f+c-this.segmentDistance,m+this.segmentDistance),t.lineTo(f+c-this.segmentDistance,m+this.segmentDistance+s),t.lineTo(f+this.segmentDistance+s,m+d-this.segmentDistance),t.lineTo(f+this.segmentDistance,m+d-this.segmentDistance),t.lineTo(f+this.segmentDistance,m+d-this.segmentDistance-s),t.lineTo(f+c-this.segmentDistance-s,m+this.segmentDistance),t.fill()),this.digitDistance+this.digitWidth;case".":return t.fillStyle="#"==n||"."==n?this.colorOn:this.colorOff,this.drawPoint(t,e,this.digitHeight-this.segmentWidth,this.segmentWidth),this.digitDistance+this.segmentWidth;case":":t.fillStyle="#"==n||":"==n?this.colorOn:this.colorOff;m=(this.digitHeight-this.segmentWidth)/2-this.segmentWidth;return this.drawPoint(t,e,m,this.segmentWidth),this.drawPoint(t,e,m+2*this.segmentWidth,this.segmentWidth),this.digitDistance+this.segmentWidth;default:return this.digitDistance}},o.prototype.drawPoint=function(t,e,i,n){var o=e+n,s=i+n,r=n/4;t.beginPath(),t.moveTo(o-r,i),t.quadraticCurveTo(o,i,o,i+r),t.lineTo(o,s-r),t.quadraticCurveTo(o,s,o-r,s),t.lineTo(e+r,s),t.quadraticCurveTo(e,s,e,s-r),t.lineTo(e,i+r),t.quadraticCurveTo(e,i,e+r,i),t.fill()},o.prototype.getSegmentColor=function(t,e,i,n){if("#"==t)return this.colorOn;switch(this.segmentCount){case 7:return-1==e.indexOf(t)?this.colorOff:this.colorOn;case 14:return-1==i.indexOf(t)?this.colorOff:this.colorOn;case 16:return-1==(i+(void 0===n?"":n)).indexOf(t)?this.colorOff:this.colorOn;default:return this.colorOff}};var s=i.p+"assets/indicator.ca3e32c2.png";function r(){for(var t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];(t=console).log.apply(t,[Date()].concat(i))}function a(t){if("true"==t.state.boot_flag&&t.lit&&!t.readOnly&&t.currentTask!==t.tasks.END){if(r("onMouseDownBigButton"),t.currentTask===t.tasks.FULL)return t.jobLightOn(t.cookedData),void(t.currentTask=t.tasks.DISPLAY);if(t.currentTask!==t.tasks.INSPECT){t.gateway.passIndicatorsMessage(l(t,"IND_ON_RES",t.store,"ok"));var e={};e.org_ea_qty=t.store.org_ea_qty,e.buttonColor=t.colors.K,t.cookedData=e,t.jobLightOn(e)}else t.lightOff()}}var l=function(t,e,i,n,o,s){var r,a=t.state;a.org_box_qty,a.org_ea_qty;return r={action:e,id:t.model.id,biz_id:i?i.biz_id:void 0,biz_type:i.biz_type,action_type:i.action_type,ret_args:i.ret_args,biz_flag:n},i&&((i.org_relay||0==i.org_relay)&&(r.org_relay=parseInt(i.org_relay)),(i.org_box_qty||0==i.org_box_qty)&&(r.org_box_qty=parseInt(i.org_box_qty),r.res_box_qty=o>=0?o:parseInt(i.org_box_qty)),(i.org_ea_qty||0==i.org_ea_qty)&&(r.org_ea_qty=parseInt(i.org_ea_qty),r.res_ea_qty=s>=0?s:parseInt(i.org_ea_qty))),r};function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t,e,i){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"segments",name:"segments"},{type:"select",label:"button color",name:"buttonColor",property:{options:[{display:"YELLOW",value:"#ff0"},{display:"GREEN",value:"#0f0"},{display:"RED",value:"#f00"},{display:"BLUE",value:"#00f"}]}},{type:"select",label:"boot-flag",name:"boot_flag",property:{options:[{display:"TRUE",value:"true"},{display:"FALSE",value:"false"}]}}]},y=function(t){function e(){var t,i;d(this,e);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(i=g(this,(t=f(e)).call.apply(t,[this].concat(o)))).lit=!1,i.ledLit=!1,i.store={},i.conf={seg_role:["B","P"],alignment:"R",btn_mode:"S",btn_intvl:5,bf_on_msg:"",bf_on_msg_t:10,bf_on_delay:10,cncl_delay:10,blink_if_full:!0,off_use_res:!1,led_bar_mode:"S",led_bar_intvl:5,led_bar_brtns:6},i.currentTask="ready",i}var i,n,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,t),i=e,h=[{key:"image",get:function(){return e._image||(e._image=new Image,e._image.src=s),e._image}}],(n=[{key:"dispose",value:function(){u(f(e.prototype),"dispose",this).call(this)}},{key:"setSegmentsState",value:function(t){var e=[];(this.store.seg_role?this.store.seg_role:this.getConf.seg_role).forEach((function(i){var n;t.forEach((function(t){i==t.role&&(t.value||t.value>=0)&&(n=t.value)})),e.push(n)}));var i=e.join(",");this.setState("segments",i)}},{key:"jobLightOn",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=function(t){t.displayMessage(t.getConf.bf_on_msg,"K",!1),setTimeout((function(){n(t)}),100*t.getConf.bf_on_msg_t)},n=function(i){i.lightOff(),setTimeout((function(){i.lightOn(t,e)}),1e3*i.getConf.bf_on_delay)};"string"==typeof this.getConf.bf_on_msg&&this.getConf.bf_on_msg.length>0?i(this):this.getConf.bf_on_delay>0?n(this):this.lightOn(t,e)}},{key:"lightOn",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=parseInt(6/this.getConf.seg_role.length);switch(this.getConf.alignment){case this.alignmentOptions.LEFT:var n=[];Object.values(this.segmentRoles).forEach((function(e){if(t[e.KEY]||t[e.KEY]>=0){var i={role:e.INITIAL,value:t[e.KEY]};n.push(i)}})),this.setSegmentsState(n);break;case this.alignmentOptions.RIGHT:default:var o=[];Object.values(this.segmentRoles).forEach((function(e){if(t[e.KEY]||t[e.KEY]>=0){var n={role:e.INITIAL,value:("  "+t[e.KEY]).substr(-i)};o.push(n)}})),this.setSegmentsState(o)}t.buttonColor&&this.setState("buttonColor",String(t.buttonColor)),this.lit=e}},{key:"lightOff",value:function(){this.setState("segments",3==this.displays.length?",,":","),this.setState("buttonColor","#0000"),this.lit=!1}},{key:"displayMessage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"K",i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.displays[0].pattern.length,o=n*this.displays.length,s=t||this.getConf.bf_on_msg;switch(this.conf.alignment){case this.alignmentOptions.LEFT:s=(s+"      ").substr(0,o);break;case this.alignmentOptions.RIGHT:default:s=("      "+s).substr(-o)}for(var r=[],a=1,l=0;a<=o;)a%n==0&&(r.push(s.substr(l,n)),l=a),a++;this.setState("segments",r.join(",")),this.setState("buttonColor",this.colors[e]),this.lit=i}},{key:"rectButtonContains",value:function(t,e,i,n){var o=290*i,s=15*n,r=52*i,a=24*n;return t<Math.max(o+r,o)+3&&t>Math.min(o+r,o)-3&&e<Math.max(s+a,s)+3&&e>Math.min(s+a,s)-3}},{key:"mfcButtonContains",value:function(t,e,i,n){var o=7*i,s=7*n,r=96*i,a=27*n,l=(t-r)/(2*o-.5),h=(e-a)/(2*s-.5);return l*l+h*h<.25?"M":(l=(t-(r=113*i))/(2*o-.5))*l+(h=(e-(a=16*n))/(2*s-.5))*h<.25?"F":(l=(t-(r=113*i))/(2*o-.5))*l+(h=(e-(a=38*n))/(2*s-.5))*h<.25?"C":void 0}},{key:"onmousedown",value:function(t,e){var i,n=this.bounds,o=n.left,s=n.top,h=n.width/449,d=n.height/53,c=this.transcoordC2S(t.offsetX,t.offsetY),g=c.x,u=c.y;if(this.rectButtonContains(g-o,u-s,h,d))a(this);else switch(this.mfcButtonContains(g-o,u-s,h,d)){case"M":!function(t){if("true"==t.state.boot_flag&&t.lit&&!t.readOnly&&t.currentTask!==t.tasks.FULL&&t.currentTask!==t.tasks.END&&t.currentTask!==t.tasks.INSPECT){r("onMouseDownButton","M");var e=!!t.store.org_box_qty&&t.store.org_box_qty,i=!!t.store.org_ea_qty&&t.store.org_ea_qty,n="modify";e=Math.ceil(e/2),i=Math.ceil(i/2),n=e==t.store.org_box_qty&&i==t.store.org_ea_qty?"ok":"modify",t.gateway.passIndicatorsMessage(l(t,"IND_ON_RES",t.store,n,e,i));var o={};o.org_ea_qty=t.store.org_ea_qty,o.buttonColor=t.colors.K,t.cookedData=o,t.jobLightOn(o)}}(this);break;case"F":"true"==(i=this).state.boot_flag&&i.lit&&!i.readOnly&&i.currentTask!=i.tasks.STOCK&&i.currentTask!==i.tasks.FULL&&(r("onMouseDownButton","F"),i.gateway.passIndicatorsMessage(l(i,"IND_ON_RES",i.store,"full")),i.displayMessage("-FULL-",i.store.color),i.currentTask=i.tasks.FULL);break;case"C":!function(t){"true"==t.state.boot_flag&&t.lit&&!t.readOnly&&t.currentTask!=t.tasks.STOCK&&t.currentTask!==t.tasks.FULL&&t.currentTask!==t.tasks.END&&(r("onMouseDownButton","C"),t.displayMessage("CAnCEL"),setTimeout((function(){t.gateway.passIndicatorsMessage(l(t,"IND_ON_RES",t.store,"cancel",0,0)),t.lightOff()}),100*t.getConf.cncl_delay))}(this)}}},{key:"_drawRectButton",value:function(t,e,i,n){var o=52*e,s=24*i,r=Math.min(7*e,7*i),a=Math.floor(r/2),l=Math.floor(r/5);o<2*r&&(r=o/2),s<2*r&&(r=s/2),t.beginPath(),t.moveTo(r,0),t.arcTo(o,0,o,s,r),t.arcTo(o,s,0,s,r),t.arcTo(0,s,0,0,r),t.arcTo(0,0,o,0,r),t.globalAlpha=1,t.fillStyle=n,t.strokeStyle=n,t.lineWidth=a,t.fill(),t.stroke(),t.strokeStyle="black",t.globalAlpha=.3,t.stroke(),t.beginPath(),t.moveTo(l,s-r),t.arcTo(l,l,r,l,r-l),t.lineTo(o-r,l),t.strokeStyle="white",t.globalAlpha=.6,t.lineWidth=l,t.stroke(),t.beginPath(),t.moveTo(o-r,l),t.arcTo(o-l,l,o-l,r,r-l),t.arcTo(o-l,s-l,o-r,s-l,r-l),t.arcTo(l,s-l,l,s-r,r-l),t.strokeStyle="white",t.globalAlpha=.4,t.lineWidth=l,t.stroke(),t.globalAlpha=1}},{key:"_drawMFCButton",value:function(t,e,i){t.textAlign="center",t.textBaseline="middle",t.font="bold ".concat(Math.min(10*e,10*i),"px Arial"),t.beginPath(),t.ellipse(96*e,27*i,7*e,7*i,0,0,2*Math.PI),t.fillStyle="white",t.fill(),t.fillStyle="#a8a8a8",t.fillText("M",96*e,27*i),t.beginPath(),t.ellipse(113*e,16*i,7*e,7*i,0,0,2*Math.PI),t.fillStyle="white",t.fill(),t.fillStyle="#a8a8a8",t.fillText("F",113*e,16*i),t.beginPath(),t.ellipse(113*e,38*i,7*e,7*i,0,0,2*Math.PI),t.fillStyle="white",t.fill(),t.fillStyle="#a8a8a8",t.fillText("C",113*e,38*i)}},{key:"_draw",value:function(t){var i=this.bounds,n=i.left,o=i.top,s=i.width,r=i.height,a=this.state.buttonColor||"#0000",l=s/449,h=r/53;t.translate(n,o),t.save(),t.beginPath(),t.drawImage(e.image,0,0,s,r),this._drawMFCButton(t,l,h);var d=this.displays,c=3==d.length?1:0;t.translate((135-12*c)*l,12*h),d[0].draw(t),d.length>=2&&(t.translate((75-25*c)*l,0),d[1].draw(t)),d.length>=3&&(t.translate((75-25*c)*l,0),d[2].draw(t)),t.beginPath(),t.restore(),t.translate(290*l,15*h),this._drawRectButton(t,l,h,a),t.beginPath()}},{key:"onchangeData",value:function(t,i){var n,o;u(f(e.prototype),"onchangeData",this).call(this,t,i),n=this,o=t.data,n.lightOn(o),n.data.dataChanged=!1}},{key:"onButton",value:function(){switch(this.currentTask){case this.tasks.END:break;case this.tasks.DISPLAY:return;default:a(this)}}},{key:"colors",get:function(){return{R:"#f00",G:"#0f0",B:"#00f",C:"#0ff",M:"#f0f",Y:"#ff0",K:"#0000",W:"#fff"}}},{key:"btnModes",get:function(){return{BLINK:"B",ALWAYS:"S"}}},{key:"tasks",get:function(){return{PICK:"pick",STOCK:"stock",FULL:"full",END:"end",DISPLAY:"display",READY:"ready"}}},{key:"alignmentOptions",get:function(){return{LEFT:"L",RIGHT:"R"}}},{key:"segmentRoles",get:function(){return{RELAY_SEQ:{INITIAL:"R",KEY:"org_relay"},BOXES:{INITIAL:"B",KEY:"org_box_qty"},PCS:{INITIAL:"P",KEY:"org_ea_qty"}}}},{key:"getConf",get:function(){return this.conf}},{key:"setConf",set:function(t){this.conf=t}},{key:"gateway",get:function(){for(var t=this.parent;"Gateway"!==t.constructor.name;)t=t.parent;if("Window"!==t.constructor.name)return t}},{key:"ledRect",get:function(){return this.parent.findFirst("rect")||{}}},{key:"displays",get:function(){var t=this.bounds,e=t.width,i=t.height,n=e/449,s=i/53,r=this.state.segments;return(void 0===r?new Array(this.getConf.seg_role.length).join(","):r).split(",",3).map((function(t,e,i){var r=new o(63*n,28*s);return r.pattern=2==i.length?"###":3==i.length?"##":"",r.displayAngle=8,r.digitHeight=20,r.digitWidth=11,r.digitDistance=6,r.segmentWidth=1.8,r.segmentDistance=.2,r.segmentCount=o.SevenSegment,r.cornerType=o.SymmetricCorner,r.colorOn=0==e?"#007dfe":1==e?"#fd0000":"#fee400",r.colorOff="#2c2c2c",r.setValue(t),r}))}},{key:"hasTextProperty",get:function(){return!1}},{key:"controls",get:function(){}},{key:"nature",get:function(){return b}}])&&c(i.prototype,n),h&&c(i,h),e}(Object(n.RectPath)(n.Shape));n.Component.register("indicator",y);var p=i(1),v=i.n(p),W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNBODBENUNFMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ4Rjc3QzdBMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0E4MEQ1Q0MxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0E4MEQ1Q0QxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MovTsAAAC90lEQVR42sxUS0gbURR9M5lk8lE7mSLGkITWlMZKDMGUxv5owcZFF7rN0kXdJlBwrytBXWRjF3ZjyCYbUUGhElBphUaIH6jGTxEiNVEi+RnzM5Ok902bkBhLKbjohUve5L173r3n3PuIUqmEbtNIdMtWAczlcrxHo1H+2+12CywWizQSiciamprsIpHo/cnJCdPT0yN1uVwUPnN2doYymQzvZaOu3yCRSFAgELh7eHj4OBaL6TY2NjyNjY00RVGCnZ0dZTwef/Md7OjoyNfc3Hx+Pb4CSNM0/7uysvJwcHDwLQQw+Nvj8WjFYnEeuC6srq7e39zcZMHNTqfz0dTU1Kfe3l5/dYZEWRSv14vkcrnCbDYPJBIJcflAR0dH9PT0VFIoFAi1Wp3e3d1ly3tSqfQK4pzt7e1BoVBYyyFkgRwOx7NqMGx+v5+F0sUXFxd0NRi2dDotGhsbe1kGqwE0Go24XPUfxCN+e50tLy+roEqiDnBycvLFwcEB869tEgqFGiYmJl7Xcdjd3f0umUxKBAJBCUqh/tbwBEFgDrlisUgAXVmfz/exBhC4kwBfilQqRZtMph8kSXLlwGrD56GFEMdxJIBooDs4vV4fYhgmUwOIeQBFbfv7+3Josw+tra1hvIcBQeEKEDYQCEFmjEqlsiuVyhT0rQOE4Wo4hMBSV1dXGK9nZmb0MpkMYYfp4Cchm82iYDDI/7e0tIRmZ2c7cRhUEwawQp0oUCqy2WxevB4dHX2ytramxdnt7e2hy8tLfh9E488C8L2RkZGneD00NPQVuK8QLhgeHuYX0GsI0o8DF8KFhYW2xcXFB3CzUKvVpjUazRWMJAmg7Pz8vGl6etpyfHzcAKDrfX196yAigvGsVfn8/NdYAofU9vb2c7vd/gr2SJ1Ol2BZNoezhYeDhv07+Nz4+Phng8HwBTyPvxUKxc2AW1tbCBQmW1paFPDidM7NzbWB+vz1MGLJ/v7+gNVq/QZlh/L5fBHaDd0I+P8/sLdlPwUYABIWfIdJQ71UAAAAAElFTkSuQmCC",T=[{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNBODBENUNFMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ4Rjc3QzdBMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0E4MEQ1Q0MxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0E4MEQ1Q0QxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MovTsAAAC90lEQVR42sxUS0gbURR9M5lk8lE7mSLGkITWlMZKDMGUxv5owcZFF7rN0kXdJlBwrytBXWRjF3ZjyCYbUUGhElBphUaIH6jGTxEiNVEi+RnzM5Ok902bkBhLKbjohUve5L173r3n3PuIUqmEbtNIdMtWAczlcrxHo1H+2+12CywWizQSiciamprsIpHo/cnJCdPT0yN1uVwUPnN2doYymQzvZaOu3yCRSFAgELh7eHj4OBaL6TY2NjyNjY00RVGCnZ0dZTwef/Md7OjoyNfc3Hx+Pb4CSNM0/7uysvJwcHDwLQQw+Nvj8WjFYnEeuC6srq7e39zcZMHNTqfz0dTU1Kfe3l5/dYZEWRSv14vkcrnCbDYPJBIJcflAR0dH9PT0VFIoFAi1Wp3e3d1ly3tSqfQK4pzt7e1BoVBYyyFkgRwOx7NqMGx+v5+F0sUXFxd0NRi2dDotGhsbe1kGqwE0Go24XPUfxCN+e50tLy+roEqiDnBycvLFwcEB869tEgqFGiYmJl7Xcdjd3f0umUxKBAJBCUqh/tbwBEFgDrlisUgAXVmfz/exBhC4kwBfilQqRZtMph8kSXLlwGrD56GFEMdxJIBooDs4vV4fYhgmUwOIeQBFbfv7+3Josw+tra1hvIcBQeEKEDYQCEFmjEqlsiuVyhT0rQOE4Wo4hMBSV1dXGK9nZmb0MpkMYYfp4Cchm82iYDDI/7e0tIRmZ2c7cRhUEwawQp0oUCqy2WxevB4dHX2ytramxdnt7e2hy8tLfh9E488C8L2RkZGneD00NPQVuK8QLhgeHuYX0GsI0o8DF8KFhYW2xcXFB3CzUKvVpjUazRWMJAmg7Pz8vGl6etpyfHzcAKDrfX196yAigvGsVfn8/NdYAofU9vb2c7vd/gr2SJ1Ol2BZNoezhYeDhv07+Nz4+Phng8HwBTyPvxUKxc2AW1tbCBQmW1paFPDidM7NzbWB+vz1MGLJ/v7+gNVq/QZlh/L5fBHaDd0I+P8/sLdlPwUYABIWfIdJQ71UAAAAAElFTkSuQmCC",handler:function(t){r("onclickStart"),t.boot()}},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNBODBENUNFMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ4Rjc3QzdBMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0E4MEQ1Q0MxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0E4MEQ1Q0QxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MovTsAAAC90lEQVR42sxUS0gbURR9M5lk8lE7mSLGkITWlMZKDMGUxv5owcZFF7rN0kXdJlBwrytBXWRjF3ZjyCYbUUGhElBphUaIH6jGTxEiNVEi+RnzM5Ok902bkBhLKbjohUve5L173r3n3PuIUqmEbtNIdMtWAczlcrxHo1H+2+12CywWizQSiciamprsIpHo/cnJCdPT0yN1uVwUPnN2doYymQzvZaOu3yCRSFAgELh7eHj4OBaL6TY2NjyNjY00RVGCnZ0dZTwef/Md7OjoyNfc3Hx+Pb4CSNM0/7uysvJwcHDwLQQw+Nvj8WjFYnEeuC6srq7e39zcZMHNTqfz0dTU1Kfe3l5/dYZEWRSv14vkcrnCbDYPJBIJcflAR0dH9PT0VFIoFAi1Wp3e3d1ly3tSqfQK4pzt7e1BoVBYyyFkgRwOx7NqMGx+v5+F0sUXFxd0NRi2dDotGhsbe1kGqwE0Go24XPUfxCN+e50tLy+roEqiDnBycvLFwcEB869tEgqFGiYmJl7Xcdjd3f0umUxKBAJBCUqh/tbwBEFgDrlisUgAXVmfz/exBhC4kwBfilQqRZtMph8kSXLlwGrD56GFEMdxJIBooDs4vV4fYhgmUwOIeQBFbfv7+3Josw+tra1hvIcBQeEKEDYQCEFmjEqlsiuVyhT0rQOE4Wo4hMBSV1dXGK9nZmb0MpkMYYfp4Cchm82iYDDI/7e0tIRmZ2c7cRhUEwawQp0oUCqy2WxevB4dHX2ytramxdnt7e2hy8tLfh9E488C8L2RkZGneD00NPQVuK8QLhgeHuYX0GsI0o8DF8KFhYW2xcXFB3CzUKvVpjUazRWMJAmg7Pz8vGl6etpyfHzcAKDrfX196yAigvGsVfn8/NdYAofU9vb2c7vd/gr2SJ1Ol2BZNoezhYeDhv07+Nz4+Phng8HwBTyPvxUKxc2AW1tbCBQmW1paFPDidM7NzbWB+vz1MGLJ/v7+gNVq/QZlh/L5fBHaDd0I+P8/sLdlPwUYABIWfIdJQ71UAAAAAElFTkSuQmCC",handler:function(t){r("onclickStop"),t.off()}},{icon:W,handler:function(t){if(r("onclickStatus"),"false"==t.state.power_flag)return;var e=t.indicators[Math.floor(Math.random()*t.indicators.length)];t.publisher.data={properties:t.generateMessageProperties(),body:{action:"IND_STATUS_RPT",id:e.model.id,version:e.version,status:Math.random()>.5?"ok":"offline",rssi:Math.floor(100*Math.random()).toString(),battery:Math.floor(100*Math.random()).toString()}},r("sent IND_STATUS_RPT",t.publisher.data)}},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNBODBENUNFMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ4Rjc3QzdBMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0E4MEQ1Q0MxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0E4MEQ1Q0QxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MovTsAAAC90lEQVR42sxUS0gbURR9M5lk8lE7mSLGkITWlMZKDMGUxv5owcZFF7rN0kXdJlBwrytBXWRjF3ZjyCYbUUGhElBphUaIH6jGTxEiNVEi+RnzM5Ok902bkBhLKbjohUve5L173r3n3PuIUqmEbtNIdMtWAczlcrxHo1H+2+12CywWizQSiciamprsIpHo/cnJCdPT0yN1uVwUPnN2doYymQzvZaOu3yCRSFAgELh7eHj4OBaL6TY2NjyNjY00RVGCnZ0dZTwef/Md7OjoyNfc3Hx+Pb4CSNM0/7uysvJwcHDwLQQw+Nvj8WjFYnEeuC6srq7e39zcZMHNTqfz0dTU1Kfe3l5/dYZEWRSv14vkcrnCbDYPJBIJcflAR0dH9PT0VFIoFAi1Wp3e3d1ly3tSqfQK4pzt7e1BoVBYyyFkgRwOx7NqMGx+v5+F0sUXFxd0NRi2dDotGhsbe1kGqwE0Go24XPUfxCN+e50tLy+roEqiDnBycvLFwcEB869tEgqFGiYmJl7Xcdjd3f0umUxKBAJBCUqh/tbwBEFgDrlisUgAXVmfz/exBhC4kwBfilQqRZtMph8kSXLlwGrD56GFEMdxJIBooDs4vV4fYhgmUwOIeQBFbfv7+3Josw+tra1hvIcBQeEKEDYQCEFmjEqlsiuVyhT0rQOE4Wo4hMBSV1dXGK9nZmb0MpkMYYfp4Cchm82iYDDI/7e0tIRmZ2c7cRhUEwawQp0oUCqy2WxevB4dHX2ytramxdnt7e2hy8tLfh9E488C8L2RkZGneD00NPQVuK8QLhgeHuYX0GsI0o8DF8KFhYW2xcXFB3CzUKvVpjUazRWMJAmg7Pz8vGl6etpyfHzcAKDrfX196yAigvGsVfn8/NdYAofU9vb2c7vd/gr2SJ1Ol2BZNoezhYeDhv07+Nz4+Phng8HwBTyPvxUKxc2AW1tbCBQmW1paFPDidM7NzbWB+vz1MGLJ/v7+gNVq/QZlh/L5fBHaDd0I+P8/sLdlPwUYABIWfIdJQ71UAAAAAElFTkSuQmCC",handler:function(t){if(r("onclickError"),"false"==t.state.power_flag)return;var e=Math.random();t.publisher.data={properties:t.generateMessageProperties(),body:{action:"ERR_RPT",hw_gb:e>.5?"gw":"ind",id:e>.5?t.model.id:t.indicators[Math.floor(e*t.indicators.length*2)].model.id,message:["ERR001","ERR002","ERR003","ERR004","ERR005","ERR006"][Math.floor(6*Math.random())]}},r("sent ERR_RPT",t.publisher.data)}},{icon:W,handler:function(t){if(r("onclickTimesync"),"false"==t.state.power_flag)return;t.publisher.data={properties:t.generateMessageProperties(),body:{action:"TIMESYNC_REQ"}},r("sent TIMESYNC_REQ",t.publisher.data)}}];function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function C(t,e,i){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var D={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",name:"publisher",label:"publisher",placeholder:""},{type:"select",label:"power flag",name:"power_flag",property:{options:[{display:"true",value:"true"},{display:"false",value:"false"}]}},{type:"select",label:"boot flag",name:"boot_flag",property:{options:[{display:"true",value:"true"},{display:"false",value:"false"}]}}]},M=function(t){function e(){return A(this,e),S(this,_(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(e,t),i=e,o=[{key:"image",get:function(){return e._image||(e._image=new Image,e._image.src="data:image/png;base64,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"),e._image}},{key:"buttonImages",get:function(){return e._buttonImages||(e._buttonImages=[],T.forEach((function(t){var i=new Image;i.src=t.icon,e._buttonImages.push(i)}))),e._buttonImages}}],(n=[{key:"dispose",value:function(){this.timerOff(),delete this.timeflow,delete this.ledBlinker,delete this.ledBarBlinker,C(_(e.prototype),"dispose",this).call(this)}},{key:"buttonContains",value:function(t,e){return T.find((function(i,n){var o=(t-(35*n+7.5))/29.5,s=(e-15)/29.5;return o*o+s*s<.25}))}},{key:"passIndicatorsMessage",value:function(t){this.state.power_flag&&this.state.boot_flag&&(this.publisher.data={properties:this.generateMessageProperties(),body:t},r("sent "+(t.action?t.action:"indicator message"),this.publisher.data))}},{key:"generateMessageProperties",value:function(){return{id:v()(),time:Date.now(),dest_id:"mps_server",source_id:this.model.id,is_reply:!1}}},{key:"generateReplyMessage",value:function(t,e,i,n){var o={properties:{id:t,time:Date.now(),dest_id:e,source_id:this.model.id,is_reply:!0},body:{action:i+"_ACK"}};switch(i){case"IND_ON_REQ":o.body={action:"IND_ON_REQ_ACK",biz_type:n.biz_type,action_type:n.action_type,ret_args:n.ret_args,read_only:n.read_only,ind_on:n.ind_on.map((function(t){var e={};return e.id=t.id,e.biz_id=t.biz_id,t.stock_taking_id&&(e.stock_taking_id=t.stock_taking_id),e}))};break;case"LED_ON_REQ":case"LED_OFF_REQ":o.body={action:i+"_ACK",id:n.id}}return o}},{key:"_draw",value:function(t){var i=this,n=this.bounds,o=n.left,s=n.top,r=n.width,a=n.height;t.beginPath(),t.rect(o,s,r,a),this.drawFill(t),this.drawStroke(t),t.drawImage(e.image,o+r-62-5,s+5,62,32),e.buttonImages.forEach((function(e,n){t.beginPath(),T[n]===i._focusedButton&&(t.ellipse(10+o+35*n+12,10+s+12,15,15,0,0,2*Math.PI),t.fillStyle="lightgray",t.fill()),t.drawImage(e,10+o+35*n,10+s,24,24)}))}},{key:"startBlinkingLed",value:function(){var t=this;this.ledBlinker=setTimeout((function(){t.indicators.forEach((function(t,e){var i="true"==t.state.boot_flag&&t.lit,n=t.getConf.btn_mode===t.btnModes.BLINK,o=t.currentTask!==t.tasks.DISPLAY,s=t.currentTask==t.tasks.FULL;i&&(n&&o||t.getConf.blink_if_full&&s)&&("#0000"===t.getState("buttonColor")?t.setState("buttonColor",String(t.colors[t.store.color])||"#0000"):t.setState("buttonColor",String("#0000")))})),t.ledBlinker&&t.startBlinkingLed()}),100*this.indicators[0].getConf.btn_intvl)}},{key:"stopBlinkingLed",value:function(){clearTimeout(this.ledBlinker)}},{key:"startBlinkingLedBar",value:function(){var t=this;this.ledBarBlinker=setTimeout((function(){t.indicators.forEach((function(t,e){t.ledLit&&t.getConf.led_bar_mode===t.btnModes.BLINK&&("#0000"===t.ledRect.strokeStyle?t.ledRect.strokeStyle="#f00"+Math.round(15*t.getConf.led_bar_brtns/10).toString(16):t.ledRect.strokeStyle="#0000")})),t.ledBarBlinker&&t.startBlinkingLedBar()}),100*this.indicators[0].getConf.led_bar_intvl)}},{key:"stopBlinkingLedBar",value:function(){clearTimeout(this.ledBarBlinker)}},{key:"boot",value:function(){if("true"!=this.state.boot_flag){this.indicators;var t=this.publisher;r("onclickStart"),this.indicators.forEach((function(t){var e=t.displays.length*t.displays[0].pattern.length;t.model.id?t.displayMessage(t.model.id):t.displayMessage(("0".repeat(e-1)+Math.floor(Math.random()*parseInt(1+"0".repeat(e)))).substr(-e))})),this.setState("power_flag","true"),t&&(t.data={properties:this.generateMessageProperties(),body:{action:"GW_INIT_REQ",id:this.model.id}}),r("sent GW_INIT_REQ",t.data)}}},{key:"off",value:function(){"false"!=this.state.power_flag&&(this.timerOff(),this.stopBlinkingLed(),this.stopBlinkingLedBar(),this.setState("power_flag",String("false")),this.setState("boot_flag",String("false")),this.indicators.forEach((function(t){t.setState("boot_flag",String("false")),t.ledRect.strokeStyle="#0000",t.lightOff()})),r("turned off "+this.model.id))}},{key:"setTimer",value:function(t){if(this.timer){var e=("0"+new Date(t).getHours()).substr(-2)+":"+("0"+new Date(t).getMinutes()).substr(-2)+":"+("0"+new Date(t).getSeconds()).substr(-2);this.timer.value=e}}},{key:"timerOn",value:function(){}},{key:"timerOff",value:function(){r(this.model.id,"timer off"),clearInterval(this.timeflow)}},{key:"onchangeData",value:function(t,i){C(_(e.prototype),"onchangeData",this).call(this,t,i),function(t,e){if("false"!=t.state.power_flag)if(e.properties.is_reply)r("server reply: ",e);else switch(r("received "+(e.body.action?e.body.action:"unknown action"),e),t.publisher.data=t.generateReplyMessage(e.properties.id,e.properties.source_id,e.body.action,e.body),r("sent reply: ",t.publisher.data),e.body.action){case"GW_INIT_RES":if("true"==t.state.boot_flag)return void r("Already booted");t.version||(t.version=e.body.gw_version),t.setTimer(1e3*parseInt(e.body.svr_time)),t.timerOn(),t.startBlinkingLed(),t.startBlinkingLedBar(),t.publisher.data={properties:t.generateMessageProperties(),body:{action:"GW_INIT_RPT",id:t.model.id,version:t.version}},r("sent GW_INIT_RPT",t.publisher.data),t.setState("boot_flag",String("true"));var i=e&&e.body&&e.body.ind_conf,n=e&&e.body&&e.body.ind_list&&e.body.ind_list.map((function(t){return t.id}));n||(n=e&&e.body&&e.body.ind_id);var o=0;t.indicators.forEach((function(s){!s.model.id&&o<n.length&&!t.findById(n[o])&&(s.model.id=n[o],t.root.indexMap[s.model.id]=s,o++),s.setState("boot_flag",String("true")),s.version||(s.version=e.body.ind_version),Object.keys(i).forEach((function(t){s.conf.hasOwnProperty(t)&&(s.conf[t]=i[t])})),s.setState("segments",new Array(s.getConf.seg_role.length).join(",")),t.publisher.data={properties:t.generateMessageProperties(),body:{action:"IND_INIT_RPT",id:s.model.id,version:s.version}},r("sent IND_INIT_RPT",t.publisher.data),s.lightOff()}));break;case"IND_ON_REQ":if("false"==t.state.boot_flag)return;var s=e&&e.body&&e.body.ind_on;s&&s.forEach((function(i){var n=t.findById(i.id);if(n&&"false"!=n.state.boot_flag){n.store=i,n.store.biz_type=e.body.biz_type,n.store.action_type=e.body.action_type,n.store.ret_args=e.body.ret_args,n.readOnly=e.body.read_only,Object.keys(n.conf).forEach((function(t){if(i.hasOwnProperty(t)){switch(t){case"seg_role":case"":return}n.conf[t]=i[t]}}));var o=i.org_relay,s=i.org_box_qty,r=i.org_ea_qty,a=i.color;switch(e.body.action_type){case n.tasks.PICK:n.currentTask=n.tasks.PICK;break;case n.tasks.STOCK:n.currentTask=n.tasks.STOCK;break;case n.tasks.FULL:return n.currentTask=n.tasks.FULL,void n.displayMessage("FULL",a);case n.tasks.FULL_MODIFY:return n.currentTask=n.tasks.FULL_MODIFY,void n.displayMessage("FUL"+i.org_ea_qty,a);case n.tasks.END:return n.currentTask=n.tasks.END,void n.displayMessage("END",a);case n.tasks.DISPLAY:n.currentTask=n.tasks.DISPLAY,a="K";break;case n.tasks.INSPECT:n.currentTask=n.tasks.INSPECT,a="I"}var l={};(o||o>=0)&&(l.org_relay=o),(s||s>=0)&&(l.org_box_qty=s),(r||r>=0)&&(l.org_ea_qty=r),a&&(l.buttonColor=n.colors[a]),n.cookedData=l,n.lit&&n.currentTask==n.tasks.FULL||(o||s||r||a)&&n.jobLightOn(l)}}));break;case"IND_OFF_REQ":if("false"==t.state.boot_flag)return;t.indicators.forEach((function(i){var n;(i.currentTask!=i.tasks.END||e.body.end_off_flag||e.body.force_flag)&&(i.getConf.off_use_res||i.lit)&&(e.body.ind_off&&(n=e.body.ind_off.find((function(t,e){return t===i.model.id}))),n&&(i.lightOff(),t.publisher.data={properties:t.generateMessageProperties(),body:{action:"IND_OFF_RES",id:i.model.id,result:!0}},r("sent IND_OFF_RES",t.publisher.data)))}));break;case"GW_DEP_REQ":if("false"==t.state.boot_flag)return;var a=!1;Math.random()>.5&&(e.body.ind_url,t.version=e.body.version,a=!0),t.publisher.data={properties:t.generateMessageProperties(),body:{action:"GW_DEP_RES",id:t.model.id,result:a,version:t.version,time:Date.now()}},r("sent GW_DEP_RES",t.publisher.data),t.off(),t.boot();break;case"IND_DEP_REQ":if("false"==t.state.boot_flag)return;t.indicators.forEach((function(i){var n;0!=i.state.boot_flag&&(Math.random()>.5?(i.version=e.body.version,n=!0):n=!1,t.publisher.data={properties:t.generateMessageProperties(),body:{action:"IND_DEP_RES",id:i.model.id,result:n,version:i.version,time:Date.now()}},r("sent IND_DEP_RES",t.publisher.data))})),t.off(),t.boot();break;case"TIMESYNC_RES":if("false"==t.state.boot_flag)return;t.setTimer(1e3*parseInt(e.body.svr_time)),t.time||t.timerOn();break;case"MW_MOD_IP_REQ":t.publisher.data={properties:t.generateMessageProperties(),body:{action:"MW_MOD_IP_RES",id:t.model.id,result:Math.random()>.5}};break;case"LED_ON_REQ":var l=t.indicators.findIndex((function(t,i){return t.model.id===e.body.id}));if(-1!=l){Object.keys(t.indicators[l].conf).forEach((function(i){e.body.hasOwnProperty(i)&&(t.indicators[l].conf[i]=e.body[i])}));var h="#f00";t.indicators[l].getConf.led_bar_brtns>10&&(t.indicators[l].conf.led_bar_brtns=10),h+=Math.round(15*t.indicators[l].getConf.led_bar_brtns/10).toString(16),t.indicators[l].ledRect.strokeStyle=h,t.indicators[l].ledLit=!0}else r("Could not find indicator",e.body.id);break;case"LED_OFF_REQ":var d=t.indicators.findIndex((function(t,i){return t.model.id===e.body.id}));-1!=d?(t.indicators[d].ledRect.strokeStyle="#0000",t.indicators[d].ledLit=!1):r("Could not find indicator",e.body.id);break;default:r("unknown message",e)}else r("got a message when power is off",e)}(this,t.data)}},{key:"onmousedown",value:function(t,e){var i=this.bounds,n=i.left,o=i.top,s=(i.width,i.height,this.transcoordC2S(t.offsetX,t.offsetY)),r=s.x,a=s.y,l=this.buttonContains(r-n-10,a-o-10);l&&l.handler(this)}},{key:"onmousemove",value:function(t,e){var i=this.bounds,n=i.left,o=i.top,s=(i.width,i.height,this.transcoordC2S(t.offsetX,t.offsetY)),r=s.x,a=s.y,l=this._focusedButton;this._focusedButton=this.buttonContains(r-n-10,a-o-10),this._focusedButton!==l&&this.invalidate()}},{key:"indicators",get:function(){var t=this.findAll("group");return 0==t.length?this.findAll("indicator"):t.map((function(t,e){return t.findFirst("indicator")}))}},{key:"publisher",get:function(){return this.state.publisher?this.findById(this.state.publisher):this.findFirst("mqtt")}},{key:"timer",get:function(){return this.findFirst("seven-segment")}},{key:"hasTextProperty",get:function(){return!1}},{key:"controls",get:function(){}},{key:"nature",get:function(){return D}}])&&k(i.prototype,n),o&&k(i,o),e}(n.Container);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function R(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.Component.register("gateway",M);var Y={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"value",name:"value",placeholder:"12:34:56"},{type:"string",label:"pattern",name:"pattern",placeholder:"##:##:##"},{type:"number",label:"digit height",name:"digitHeight",placeholder:"20"},{type:"number",label:"digit width",name:"digitWidth",placeholder:"10"},{type:"number",label:"digit distance",name:"digitDistance",placeholder:"2.5"},{type:"number",label:"display angle",name:"displayAngle",placeholder:"12"},{type:"number",label:"segment width",name:"segmentWidth",placeholder:"2.5"},{type:"number",label:"segment distance",name:"segmentDistance",placeholder:"0.2"},{type:"select",label:"segment count",name:"segmentCount",property:{options:[{display:7,value:7},{display:14,value:14},{display:16,value:16}]}},{type:"select",label:"corner type",name:"cornerType",property:{options:[{display:"SymmetricCorner",value:0},{display:"SquaredCorner",value:1},{display:"RoundedCorner",value:2}]}},{type:"color",label:"color-on",name:"colorOn"},{type:"color",label:"color-off",name:"colorOff"}],"value-property":"value"},L=function(t){function e(){return I(this,e),R(this,B(e).apply(this,arguments))}var i,n,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,t),i=e,(n=[{key:"_draw",value:function(t){var e=this.state,i=e.top,n=e.left,s=e.height,r=e.width,a=e.pattern,l=void 0===a?"##:##:##":a,h=e.value,d=void 0===h?"12:34:56":h,c=e.digitHeight,g=void 0===c?20:c,u=e.digitWidth,f=void 0===u?10:u,m=e.digitDistance,b=void 0===m?2.5:m,y=e.displayAngle,p=void 0===y?12:y,v=e.segmentWidth,W=void 0===v?2.5:v,T=e.segmentDistance,w=void 0===T?.2:T,A=e.segmentCount,k=void 0===A?o.SevenSegment:A,S=e.cornerType,C=void 0===S?o.RoundedCorner:S,_=e.colorOn,E=void 0===_?"rgb(233, 93, 15)":_,D=e.colorOff,M=void 0===D?"rgb(75, 30, 5)":D,N=new o(r,s);N.pattern=l,N.displayAngle=p,N.digitHeight=g,N.digitWidth=f,N.digitDistance=b,N.segmentWidth=W,N.segmentDistance=w,N.segmentCount=k,N.cornerType=C,N.colorOn=E,N.colorOff=M,N.setValue(String(d)),t.translate(n,i),N.draw(t),t.beginPath()}},{key:"nature",get:function(){return Y}}])&&O(i.prototype,n),s&&O(i,s),e}(Object(n.RectPath)(n.Shape));n.Component.register("seven-segment",L);var j=i.p+"assets/boot-button.99c433e8.png";function G(t){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Z(t,e){return!e||"object"!==G(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x=[{icon:j,handler:function(t){if(r("onclickBoot"),!t.data)return;for(var e=t.data,i=0;i<e.length;i++)t.publisher.data={properties:{id:v()(),time:Date.now(),dest_id:"mps_server",source_id:e[i],is_reply:!1},body:{action:"GW_INIT_REQ",id:e[i]}},r("sent GW_INIT_REQ",t.publisher.data)}}],V={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",name:"publisher",label:"publisher"}]},q=function(t){function e(){return U(this,e),Z(this,F(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(e,t),i=e,o=[{key:"image",get:function(){return e._image||(e._image=new Image,e._image.src=j),e._image}}],(n=[{key:"_draw",value:function(t){var i=this.bounds,n=i.left,o=i.top,s=i.width,r=i.height;t.beginPath(),t.rect(n,o,s,r),this.drawFill(t),this.drawStroke(t),t.drawImage(e.image,n,o,s,r)}},{key:"onmousedown",value:function(t,e){var i=this.bounds,n=i.left,o=i.top,s=(i.width,i.height,this.transcoordC2S(t.offsetX,t.offsetY)),r=s.x,a=s.y,l=this.buttonContains(r-n-10,a-o-10);l&&l.handler(this)}},{key:"buttonContains",value:function(t,e){return x[0]}},{key:"publisher",get:function(){if(this.state.publisher)return this.root.indexMap[this.state.publisher]}},{key:"nature",get:function(){return V}}])&&Q(i.prototype,n),o&&Q(i,o),e}(Object(n.RectPath)(n.Shape));n.Component.register("boot-button",q);var H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAA1PAAANTwBMtUFAwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAWLSURBVHic7ZxriFVVFMd/V8fR8RWlxRSkRVqSvRiKXpZZI2VgfrAoKILeL2g+BPlByEmYHvTBgqKMiOgFZYkVGFGk9iDC6EVlho0UyKhZmc7QTM6jD2suc2fPuefsvc+5d587d/1gwdwL87/rrHX33a+1NyiKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoiiKoijKOGZilT+vBXgIWAhsBwZSaDUDa4ErgO+AntTe1RnLkaANDdvDKbQWALtLtD5K7V2dcTfQz0gAh4BtnlqLgD8Nrf4MfKwLJgBPMTp4RfvMQ+8moK+MnpJAE7CR6OD5JKQdGIzRU2KYDXxB+eC5JKQBeCFBSxMSw1zgJ5IDaJOQqcAmCy1NSBlagC7sApiUkOOALy21NCERLAMOYx/AuIScCvzqoKUJMbge6MUtgO+U0Tob2OOopQkpoZ340U+UvQ9Mi9BaDnQ7amlChpkEvIh74F4HGiP07mHs5FETYskM4APcg/YEUDC0CpSfPNZdQszg2HAM8C5wseP/rQXWGO9NBJ4B7vLww+RxpB/7Fzg4/Pd+pD/aP2yDGXxOrjgZ2IHbN3cAuDdCaxrwnqNWGhsAdgJvAquR/mpW+pCEw2WOUbRe4LoILdc5RiWTtB14FLic6m9HeHMVbnOMIeAf5CFN5gG7HLWqZfuAp5EV5Qne0aow9+E++vkdOD1CazHwl6NWKOsE2ogengdjDe5zjF3AKRFa1zB6g6pWbC+wCllXC8YUYAPuzn+OjMJM2nFPbN7sAJKYKW6hTM90YLOHw1uAmYZWAXjEQyvP9i1wlmtQfWkGvvJwcgdjk9EIvOKhVQvWhwydG5yi68hpSEfm42CroTUTKTwIHbhK21bgePsQ2zMP+Y30cepnQ2sy8E2Kh6w16wIusw20LetSOPSqoXVtxg9cC9YH3GAb7DiKkx+fNa0iQ8brNFq1SiPwGtFLRF7oT1Z2dr9dyJPRTj0bGwRutwt5MjrszcYGgBV2IU9GJ4bZ2GHgTLuQJ2NbnGba10grM0m7PVurtpvopSRv2pDm5+LEHqK/Ga3IknzoIFXbNpPxyPNW4IijE3uRDS2T85Gt1NBBqrbdaRVpB5YAfzs60QNcHaF1EnalpuPJeojekkjFQuA3R0eOALdFaB2NnA8JHahq2sdUYNJcy0UOebCVSQEeT2VAzxuvZyAtsWizyXjE40EnsrXdl7XwFOAt3L8h64mu7FhN+h1FG5qA+cClwC1ItcnbSKt3HU362oOWvjoTd1wtzjYSvQ16M/Cfh55LQuI4CrgS2W7egnvxuK0dQFpvxXgA92/XViQAJkvxn6tkTRMyd3oSqaLJMimrKuDvKMb7cYQCcAHwHNlMbvchq+IVZTFuc5W4AztzgB8dtCqdkFKmA3cA3zv6Z9qN1XDWZa6SdKTNda4SgiWOPpbaJ9Vy8gSkVCZtQkCa9RsWWqESUmQF8AvuSTmjWg7aTPpsj0UXkJFPnhMCskLehlsN9LPVdLAReDnGGdeLA5JWnvPCAmQUaZOQg1Shcy+lAHSUccbnao2VyIGcPCcE5LnbsFslXxbCwajLZ3w7tajLZ9Jc81RJlpJc7b8+lHPm9UyPpdAyr2f6NLV3lWM+8QuyXQQ8i3Iu0tl3kL4uthkpongJWTjMM7OQS9bKJeWicK7VL8cCPxCdkI6AftU1zUhhoZkQ38vclAyYC/zB6IT0EuAgkDJCK2NHnZdADR0DHmd0Isv7i0re24kcCVQC0YAUFhZbyIaw7igA5zHy02WeIlACUSzZ7Uc79lxwIiO7rS3aqYfnEFKedCGwLbf3edQZ65CfrDnaQvLBIaS4Y7ImJD90M/ZooBKQScCH2kLywyBwjiYkX0zVhOSL7tAOKKPRaYiiKIqiKIpSD/wPzvaFerj4QgEAAAAASUVORK5CYII=";function J(t){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $(t,e){return!e||"object"!==J(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function et(t,e){return(et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var it=[{icon:H,handler:function(t){r("onClickReply"),t.root.findAll("gateway").forEach((function(t,e){t.indicators.forEach((function(t){t.onButton()}))}))}}],nt={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",name:"publisher",label:"publisher"}]},ot=function(t){function e(){return K(this,e),$(this,tt(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&et(t,e)}(e,t),i=e,o=[{key:"image",get:function(){return e._image||(e._image=new Image,e._image.src=H),e._image}}],(n=[{key:"_draw",value:function(t){var i=this.bounds,n=i.left,o=i.top,s=i.width,r=i.height;t.beginPath(),t.rect(n,o,s,r),this.drawFill(t),this.drawStroke(t),t.drawImage(e.image,n,o,s,r)}},{key:"onmousedown",value:function(t,e){var i=this.buttonContains();i&&i.handler(this)}},{key:"buttonContains",value:function(){return it[0]}},{key:"publisher",get:function(){if(this.state.publisher)return this.root.indexMap[this.state.publisher]}},{key:"nature",get:function(){return nt}}])&&X(i.prototype,n),o&&X(i,o),e}(Object(n.RectPath)(n.Shape));function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lt(t,e){return!e||"object"!==st(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ht(t,e,i){return(ht="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.Component.register("reply-button",ot);var gt={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"select",name:"switch",label:"Switch",placeholder:"false",property:{options:[{display:"OFF",value:"false"},{display:"ON",value:"true"}]}},{type:"string",name:"target",label:"target",placeholder:""},{type:"number",name:"interval",label:"interval",placeholder:0}]},ut=function(t){function e(){return rt(this,e),lt(this,dt(e).apply(this,arguments))}var i,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(e,t),i=e,(n=[{key:"dispose",value:function(){clearInterval(this.autoClicker),delete this.autoClicker,ht(dt(e.prototype),"dispose",this).call(this)}},{key:"_draw",value:function(t){var e=this.bounds,i=e.left,n=e.top,o=e.width,s=e.height;t.beginPath(),t.rect(i,n,o,s),this.drawFill(t),this.drawStroke(t)}},{key:"onmousedown",value:function(t,e){var i=this,n={true:!0,false:!1}[this.getState("switch")],o=this.getState("interval"),s=this.root.findById(this.getState("target"));this.setState("switch",!n),n=!n,this.text=n?"ON":"OFF",this.fontColor=n?"rgb(0, 173, 31)":"rgb(254, 3, 3)",r("Auto response:",n),n&&s&&o>=1e3?function n(){i.autoClicker=setTimeout((function(){s.onmousedown(t,e),n()}),o)}():clearTimeout(this.autoClicker)}},{key:"nature",get:function(){return gt}}])&&at(i.prototype,n),o&&at(i,o),e}(Object(n.RectPath)(n.Shape));n.Component.register("auto-clicker",ut)}]);
//# sourceMappingURL=things-scene-mpi-ie.js.map