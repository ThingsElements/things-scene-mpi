import{RectPath as t,Shape as e,Component as i,Container as s}from"@hatiolab/things-scene";function n(t,e){this.width=t,this.height=e,this.pattern="##:##:##",this.value="12:34:56",this.digitHeight=20,this.digitWidth=10,this.digitDistance=2.5,this.displayAngle=12,this.segmentWidth=2.5,this.segmentDistance=.2,this.segmentCount=n.SevenSegment,this.cornerType=n.RoundedCorner,this.colorOn="rgb(233, 93, 15)",this.colorOff="rgb(75, 30, 5)"}n.SevenSegment=7,n.FourteenSegment=14,n.SixteenSegment=16,n.SymmetricCorner=0,n.SquaredCorner=1,n.RoundedCorner=2,n.prototype.setValue=function(t){this.value=t},n.prototype.draw=function(t){var e=0,i=!0;if(this.pattern)for(var s=0;s<this.pattern.length;s++){var n=this.pattern.charAt(s).toLowerCase();if("#"==n)e+=this.digitWidth;else if("."==n||":"==n)e+=this.segmentWidth;else if(" "!=n)return;e+=i?0:this.digitDistance,i=!1}if(!(e<=0)){var o=-1*Math.max(-45,Math.min(45,this.displayAngle)),a=Math.tan(o*Math.PI/180),r=Math.min(this.width/(e+Math.abs(a*this.digitHeight)),this.height/this.digitHeight),h=(this.width-(e+a*this.digitHeight)*r)/2,l=(this.height-this.digitHeight*r)/2;t.save(),t.translate(h,l),t.scale(r,r),t.transform(1,0,a,1,0,0);var d=0,g=this.value?this.value.length:0;for(s=0;s<this.pattern.length;s++){var m=this.pattern.charAt(s),c=s<g?this.value.charAt(s).toLowerCase():" ";d+=this.drawDigit(t,d,m,c)}t.restore()}},n.prototype.drawDigit=function(t,e,i,s){switch(i){case"#":var o=Math.sqrt(this.segmentWidth*this.segmentWidth/2),a=Math.sqrt(this.segmentDistance*this.segmentDistance/2),r=a/2,h=(this.segmentWidth-a)*Math.sin(45*Math.PI/180),l=h/2,d=(this.digitHeight-3*this.segmentWidth)/2,g=(this.digitWidth-3*this.segmentWidth)/2,m=this.segmentWidth/2,c=this.digitWidth/2;if(16==this.segmentCount){var A=e,b=0;switch(t.fillStyle=this.getSegmentColor(s,null,"02356789abcdefgiopqrstz@%"),t.beginPath(),this.cornerType){case n.SymmetricCorner:t.moveTo(A+m+a,b+m),t.lineTo(A+this.segmentWidth+a,b);break;case n.SquaredCorner:t.moveTo(A+m+r,b+m-r),t.lineTo(A+this.segmentWidth,b);break;default:t.moveTo(A+this.segmentWidth-h,b+this.segmentWidth-h-a),t.quadraticCurveTo(A+this.segmentWidth-l,b,A+this.segmentWidth,b)}t.lineTo(A+c-a-m,b),t.lineTo(A+c-a,b+m),t.lineTo(A+c-a-m,b+this.segmentWidth),t.lineTo(A+this.segmentWidth+a,b+this.segmentWidth),t.fill();A=e,b=0;switch(t.fillStyle=this.getSegmentColor(s,null,"02356789abcdefgiopqrstz@"),t.beginPath(),t.moveTo(A+this.digitWidth-this.segmentWidth-a,b+this.segmentWidth),t.lineTo(A+c+a+m,b+this.segmentWidth),t.lineTo(A+c+a,b+m),t.lineTo(A+c+a+m,b),this.cornerType){case n.SymmetricCorner:t.lineTo(A+this.digitWidth-this.segmentWidth-a,b),t.lineTo(A+this.digitWidth-m-a,b+m);break;case n.SquaredCorner:t.lineTo(A+this.digitWidth-this.segmentWidth,b),t.lineTo(A+this.digitWidth-m-r,b+m-r);break;default:t.lineTo(A+this.digitWidth-this.segmentWidth,b),t.quadraticCurveTo(A+this.digitWidth-this.segmentWidth+l,b,A+this.digitWidth-this.segmentWidth+h,b+this.segmentWidth-h-a)}t.fill()}else{A=e,b=0;switch(t.fillStyle=this.getSegmentColor(s,"02356789acefp","02356789abcdefgiopqrstz@"),t.beginPath(),this.cornerType){case n.SymmetricCorner:t.moveTo(A+m+a,b+m),t.lineTo(A+this.segmentWidth+a,b),t.lineTo(A+this.digitWidth-this.segmentWidth-a,b),t.lineTo(A+this.digitWidth-m-a,b+m);break;case n.SquaredCorner:t.moveTo(A+m+r,b+m-r),t.lineTo(A+this.segmentWidth,b),t.lineTo(A+this.digitWidth-this.segmentWidth,b),t.lineTo(A+this.digitWidth-m-r,b+m-r);break;default:t.moveTo(A+this.segmentWidth-h,b+this.segmentWidth-h-a),t.quadraticCurveTo(A+this.segmentWidth-l,b,A+this.segmentWidth,b),t.lineTo(A+this.digitWidth-this.segmentWidth,b),t.quadraticCurveTo(A+this.digitWidth-this.segmentWidth+l,b,A+this.digitWidth-this.segmentWidth+h,b+this.segmentWidth-h-a)}t.lineTo(A+this.digitWidth-this.segmentWidth-a,b+this.segmentWidth),t.lineTo(A+this.segmentWidth+a,b+this.segmentWidth),t.fill()}switch(A=e+this.digitWidth-this.segmentWidth,b=0,t.fillStyle=this.getSegmentColor(s,"01234789adhpy","01234789abdhjmnopqruwy"),t.beginPath(),this.cornerType){case n.SymmetricCorner:t.moveTo(A+m,b+m+a),t.lineTo(A+this.segmentWidth,b+this.segmentWidth+a);break;case n.SquaredCorner:t.moveTo(A+m+r,b+m+r),t.lineTo(A+this.segmentWidth,b+this.segmentWidth);break;default:t.moveTo(A+h+a,b+this.segmentWidth-h),t.quadraticCurveTo(A+this.segmentWidth,b+this.segmentWidth-l,A+this.segmentWidth,b+this.segmentWidth)}switch(t.lineTo(A+this.segmentWidth,b+d+this.segmentWidth-a),t.lineTo(A+m,b+d+this.segmentWidth+m-a),t.lineTo(A,b+d+this.segmentWidth-a),t.lineTo(A,b+this.segmentWidth+a),t.fill(),A=e+this.digitWidth-this.segmentWidth,b=d+this.segmentWidth,t.fillStyle=this.getSegmentColor(s,"013456789abdhnouy","01346789abdghjmnoqsuw@","%"),t.beginPath(),t.moveTo(A,b+this.segmentWidth+a),t.lineTo(A+m,b+m+a),t.lineTo(A+this.segmentWidth,b+this.segmentWidth+a),t.lineTo(A+this.segmentWidth,b+d+this.segmentWidth-a),this.cornerType){case n.SymmetricCorner:t.lineTo(A+m,b+d+this.segmentWidth+m-a),t.lineTo(A,b+d+this.segmentWidth-a);break;case n.SquaredCorner:t.lineTo(A+m+r,b+d+this.segmentWidth+m-r),t.lineTo(A,b+d+this.segmentWidth-a);break;default:t.quadraticCurveTo(A+this.segmentWidth,b+d+this.segmentWidth+l,A+h+a,b+d+this.segmentWidth+h),t.lineTo(A,b+d+this.segmentWidth-a)}if(t.fill(),16==this.segmentCount){switch(A=e,b=this.digitHeight-this.segmentWidth,t.fillStyle=this.getSegmentColor(s,null,"0235689bcdegijloqsuz_=@"),t.beginPath(),t.moveTo(A+this.segmentWidth+a,b),t.lineTo(A+c-a-m,b),t.lineTo(A+c-a,b+m),t.lineTo(A+c-a-m,b+this.segmentWidth),this.cornerType){case n.SymmetricCorner:t.lineTo(A+this.segmentWidth+a,b+this.segmentWidth),t.lineTo(A+m+a,b+m);break;case n.SquaredCorner:t.lineTo(A+this.segmentWidth,b+this.segmentWidth),t.lineTo(A+m+r,b+m+r);break;default:t.lineTo(A+this.segmentWidth,b+this.segmentWidth),t.quadraticCurveTo(A+this.segmentWidth-l,b+this.segmentWidth,A+this.segmentWidth-h,b+h+a),t.lineTo(A+this.segmentWidth-h,b+h+a)}switch(t.fill(),A=e,b=this.digitHeight-this.segmentWidth,t.fillStyle=this.getSegmentColor(s,null,"0235689bcdegijloqsuz_=@","%"),t.beginPath(),t.moveTo(A+c+a+m,b+this.segmentWidth),t.lineTo(A+c+a,b+m),t.lineTo(A+c+a+m,b),t.lineTo(A+this.digitWidth-this.segmentWidth-a,b),this.cornerType){case n.SymmetricCorner:t.lineTo(A+this.digitWidth-m-a,b+m),t.lineTo(A+this.digitWidth-this.segmentWidth-a,b+this.segmentWidth);break;case n.SquaredCorner:t.lineTo(A+this.digitWidth-m-r,b+m+r),t.lineTo(A+this.digitWidth-this.segmentWidth,b+this.segmentWidth);break;default:t.lineTo(A+this.digitWidth-this.segmentWidth+h,b+h+a),t.quadraticCurveTo(A+this.digitWidth-this.segmentWidth+l,b+this.segmentWidth,A+this.digitWidth-this.segmentWidth,b+this.segmentWidth)}t.fill()}else{switch(A=e,b=this.digitHeight-this.segmentWidth,t.fillStyle=this.getSegmentColor(s,"0235689bcdelotuy_","0235689bcdegijloqsuz_=@"),t.beginPath(),t.moveTo(A+this.segmentWidth+a,b),t.lineTo(A+this.digitWidth-this.segmentWidth-a,b),this.cornerType){case n.SymmetricCorner:t.lineTo(A+this.digitWidth-m-a,b+m),t.lineTo(A+this.digitWidth-this.segmentWidth-a,b+this.segmentWidth),t.lineTo(A+this.segmentWidth+a,b+this.segmentWidth),t.lineTo(A+m+a,b+m);break;case n.SquaredCorner:t.lineTo(A+this.digitWidth-m-r,b+m+r),t.lineTo(A+this.digitWidth-this.segmentWidth,b+this.segmentWidth),t.lineTo(A+this.segmentWidth,b+this.segmentWidth),t.lineTo(A+m+r,b+m+r);break;default:t.lineTo(A+this.digitWidth-this.segmentWidth+h,b+h+a),t.quadraticCurveTo(A+this.digitWidth-this.segmentWidth+l,b+this.segmentWidth,A+this.digitWidth-this.segmentWidth,b+this.segmentWidth),t.lineTo(A+this.segmentWidth,b+this.segmentWidth),t.quadraticCurveTo(A+this.segmentWidth-l,b+this.segmentWidth,A+this.segmentWidth-h,b+h+a),t.lineTo(A+this.segmentWidth-h,b+h+a)}t.fill()}switch(A=e,b=d+this.segmentWidth,t.fillStyle=this.getSegmentColor(s,"0268abcdefhlnoprtu","0268acefghjklmnopqruvw@"),t.beginPath(),t.moveTo(A,b+this.segmentWidth+a),t.lineTo(A+m,b+m+a),t.lineTo(A+this.segmentWidth,b+this.segmentWidth+a),t.lineTo(A+this.segmentWidth,b+d+this.segmentWidth-a),this.cornerType){case n.SymmetricCorner:t.lineTo(A+m,b+d+this.segmentWidth+m-a),t.lineTo(A,b+d+this.segmentWidth-a);break;case n.SquaredCorner:t.lineTo(A+m-r,b+d+this.segmentWidth+m-a+r),t.lineTo(A,b+d+this.segmentWidth);break;default:t.lineTo(A+this.segmentWidth-h-a,b+d+this.segmentWidth+h),t.quadraticCurveTo(A,b+d+this.segmentWidth+l,A,b+d+this.segmentWidth)}switch(t.fill(),A=e,b=0,t.fillStyle=this.getSegmentColor(s,"045689abcefhlpty","045689acefghklmnopqrsuvwy@","%"),t.beginPath(),t.moveTo(A+this.segmentWidth,b+this.segmentWidth+a),t.lineTo(A+this.segmentWidth,b+d+this.segmentWidth-a),t.lineTo(A+m,b+d+this.segmentWidth+m-a),t.lineTo(A,b+d+this.segmentWidth-a),this.cornerType){case n.SymmetricCorner:t.lineTo(A,b+this.segmentWidth+a),t.lineTo(A+m,b+m+a);break;case n.SquaredCorner:t.lineTo(A,b+this.segmentWidth),t.lineTo(A+m-r,b+m+r);break;default:t.lineTo(A,b+this.segmentWidth),t.quadraticCurveTo(A,b+this.segmentWidth-l,A+this.segmentWidth-h-a,b+this.segmentWidth-h),t.lineTo(A+this.segmentWidth-h-a,b+this.segmentWidth-h)}return t.fill(),7==this.segmentCount&&(A=e,b=(this.digitHeight-this.segmentWidth)/2,t.fillStyle=this.getSegmentColor(s,"2345689abdefhnoprty-="),t.beginPath(),t.moveTo(A+m+a,b+m),t.lineTo(A+this.segmentWidth+a,b),t.lineTo(A+this.digitWidth-this.segmentWidth-a,b),t.lineTo(A+this.digitWidth-m-a,b+m),t.lineTo(A+this.digitWidth-this.segmentWidth-a,b+this.segmentWidth),t.lineTo(A+this.segmentWidth+a,b+this.segmentWidth),t.fill()),7!=this.segmentCount&&(A=e,b=(this.digitHeight-this.segmentWidth)/2,t.fillStyle=this.getSegmentColor(s,null,"2345689aefhkprsy-+*=","%"),t.beginPath(),t.moveTo(A+m+a,b+m),t.lineTo(A+this.segmentWidth+a,b),t.lineTo(A+c-a-m,b),t.lineTo(A+c-a,b+m),t.lineTo(A+c-a-m,b+this.segmentWidth),t.lineTo(A+this.segmentWidth+a,b+this.segmentWidth),t.fill(),A=e,b=(this.digitHeight-this.segmentWidth)/2,t.fillStyle=this.getSegmentColor(s,null,"234689abefghprsy-+*=@","%"),t.beginPath(),t.moveTo(A+c+a,b+m),t.lineTo(A+c+a+m,b),t.lineTo(A+this.digitWidth-this.segmentWidth-a,b),t.lineTo(A+this.digitWidth-m-a,b+m),t.lineTo(A+this.digitWidth-this.segmentWidth-a,b+this.segmentWidth),t.lineTo(A+c+a+m,b+this.segmentWidth),t.fill(),A=e+c-m,b=0,t.fillStyle=this.getSegmentColor(s,null,"bdit+*","%"),t.beginPath(),14==this.segmentCount?(t.moveTo(A,b+this.segmentWidth+this.segmentDistance),t.lineTo(A+this.segmentWidth,b+this.segmentWidth+this.segmentDistance)):(t.moveTo(A,b+this.segmentWidth+a),t.lineTo(A+m,b+m+a),t.lineTo(A+this.segmentWidth,b+this.segmentWidth+a)),t.lineTo(A+this.segmentWidth,b+d+this.segmentWidth-a),t.lineTo(A+m,b+d+this.segmentWidth+m-a),t.lineTo(A,b+d+this.segmentWidth-a),t.fill(),A=e+c-m,b=this.digitHeight,t.fillStyle=this.getSegmentColor(s,null,"bdity+*@","%"),t.beginPath(),14==this.segmentCount?(t.moveTo(A,b-this.segmentWidth-this.segmentDistance),t.lineTo(A+this.segmentWidth,b-this.segmentWidth-this.segmentDistance)):(t.moveTo(A,b-this.segmentWidth-a),t.lineTo(A+m,b-m-a),t.lineTo(A+this.segmentWidth,b-this.segmentWidth-a)),t.lineTo(A+this.segmentWidth,b-d-this.segmentWidth+a),t.lineTo(A+m,b-d-this.segmentWidth-m+a),t.lineTo(A,b-d-this.segmentWidth+a),t.fill(),A=e+this.segmentWidth,b=this.segmentWidth,t.fillStyle=this.getSegmentColor(s,null,"mnx\\*"),t.beginPath(),t.moveTo(A+this.segmentDistance,b+this.segmentDistance),t.lineTo(A+this.segmentDistance+o,b+this.segmentDistance),t.lineTo(A+g-this.segmentDistance,b+d-this.segmentDistance-o),t.lineTo(A+g-this.segmentDistance,b+d-this.segmentDistance),t.lineTo(A+g-this.segmentDistance-o,b+d-this.segmentDistance),t.lineTo(A+this.segmentDistance,b+this.segmentDistance+o),t.fill(),A=e+g+2*this.segmentWidth,b=this.segmentWidth,t.fillStyle=this.getSegmentColor(s,null,"0kmvxz/*","%"),t.beginPath(),t.moveTo(A+g-this.segmentDistance,b+this.segmentDistance),t.lineTo(A+g-this.segmentDistance,b+this.segmentDistance+o),t.lineTo(A+this.segmentDistance+o,b+d-this.segmentDistance),t.lineTo(A+this.segmentDistance,b+d-this.segmentDistance),t.lineTo(A+this.segmentDistance,b+d-this.segmentDistance-o),t.lineTo(A+g-this.segmentDistance-o,b+this.segmentDistance),t.fill(),A=e+g+2*this.segmentWidth,b=d+2*this.segmentWidth,t.fillStyle=this.getSegmentColor(s,null,"5knqrwx\\*"),t.beginPath(),t.moveTo(A+this.segmentDistance,b+this.segmentDistance),t.lineTo(A+this.segmentDistance+o,b+this.segmentDistance),t.lineTo(A+g-this.segmentDistance,b+d-this.segmentDistance-o),t.lineTo(A+g-this.segmentDistance,b+d-this.segmentDistance),t.lineTo(A+g-this.segmentDistance-o,b+d-this.segmentDistance),t.lineTo(A+this.segmentDistance,b+this.segmentDistance+o),t.fill(),A=e+this.segmentWidth,b=d+2*this.segmentWidth,t.fillStyle=this.getSegmentColor(s,null,"0vwxz/*","%"),t.beginPath(),t.moveTo(A+g-this.segmentDistance,b+this.segmentDistance),t.lineTo(A+g-this.segmentDistance,b+this.segmentDistance+o),t.lineTo(A+this.segmentDistance+o,b+d-this.segmentDistance),t.lineTo(A+this.segmentDistance,b+d-this.segmentDistance),t.lineTo(A+this.segmentDistance,b+d-this.segmentDistance-o),t.lineTo(A+g-this.segmentDistance-o,b+this.segmentDistance),t.fill()),this.digitDistance+this.digitWidth;case".":return t.fillStyle="#"==s||"."==s?this.colorOn:this.colorOff,this.drawPoint(t,e,this.digitHeight-this.segmentWidth,this.segmentWidth),this.digitDistance+this.segmentWidth;case":":t.fillStyle="#"==s||":"==s?this.colorOn:this.colorOff;b=(this.digitHeight-this.segmentWidth)/2-this.segmentWidth;return this.drawPoint(t,e,b,this.segmentWidth),this.drawPoint(t,e,b+2*this.segmentWidth,this.segmentWidth),this.digitDistance+this.segmentWidth;default:return this.digitDistance}},n.prototype.drawPoint=function(t,e,i,s){var n=e+s,o=i+s,a=s/4;t.beginPath(),t.moveTo(n-a,i),t.quadraticCurveTo(n,i,n,i+a),t.lineTo(n,o-a),t.quadraticCurveTo(n,o,n-a,o),t.lineTo(e+a,o),t.quadraticCurveTo(e,o,e,o-a),t.lineTo(e,i+a),t.quadraticCurveTo(e,i,e+a,i),t.fill()},n.prototype.getSegmentColor=function(t,e,i,s){if("#"==t)return this.colorOn;switch(this.segmentCount){case 7:return-1==e.indexOf(t)?this.colorOff:this.colorOn;case 14:return-1==i.indexOf(t)?this.colorOff:this.colorOn;case 16:return-1==(i+(void 0===s?"":s)).indexOf(t)?this.colorOff:this.colorOn;default:return this.colorOff}};var o="b1f6eaac726ac8d2.png";function a(...t){console.log(Date(),...t)}function r(t){"true"==t.state.boot_flag&&t.lit&&!t.readOnly&&t.currentTask!==t.tasks.END&&(a("onMouseDownBigButton"),t.gateway.passIndicatorsMessage(h(t,"IND_ON_RES",t.store,"ok")),t.lightOff())}var h=function(t,e,i,s,n,o){var a,{org_box_qty:r,org_ea_qty:h}=t.state;return a={action:e,id:t.model.id,biz_id:i?i.biz_id:void 0,biz_type:i.biz_type,action_type:i.action_type,ret_args:i.ret_args,biz_flag:s},i&&((i.org_relay||0==i.org_relay)&&(a.org_relay=parseInt(i.org_relay)),(i.org_box_qty||0==i.org_box_qty)&&(a.org_box_qty=parseInt(i.org_box_qty),a.res_box_qty=n>=0?n:parseInt(i.org_box_qty)),(i.org_ea_qty||0==i.org_ea_qty)&&(a.org_ea_qty=parseInt(i.org_ea_qty),a.res_ea_qty=o>=0?o:parseInt(i.org_ea_qty))),a};const l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"segments",name:"segments"},{type:"select",label:"button color",name:"buttonColor",property:{options:[{display:"YELLOW",value:"#ff0"},{display:"GREEN",value:"#0f0"},{display:"RED",value:"#f00"},{display:"BLUE",value:"#00f"}]}},{type:"select",label:"boot-flag",name:"boot_flag",property:{options:[{display:"TRUE",value:"true"},{display:"FALSE",value:"false"}]}}]},d=449,g=53,m=3;class c extends(t(e)){constructor(...t){super(...t),this.lit=!1,this.ledLit=!1,this.store={},this.conf={seg_role:["B","P"],alignment:"R",btn_mode:"S",btn_intvl:5,bf_on_msg:"",bf_on_msg_t:10,bf_on_delay:10,cncl_delay:10,blink_if_full:!0,off_use_res:!1,led_bar_mode:"S",led_bar_intvl:5,led_bar_brtns:6},this.currentTask="ready"}static get image(){return c._image||(c._image=new Image,c._image.src=o),c._image}get colors(){return{R:"#f00",G:"#0f0",B:"#00f",C:"#0ff",M:"#f0f",Y:"#ff0",K:"#0000",W:"#fff"}}get btnModes(){return{BLINK:"B",ALWAYS:"S"}}get tasks(){return{PICK:"pick",STOCK:"stock",FULL:"full",END:"end",DISPLAY:"display",READY:"ready"}}get alignmentOptions(){return{LEFT:"L",RIGHT:"R"}}get segmentRoles(){return{RELAY_SEQ:{INITIAL:"R",KEY:"org_relay"},BOXES:{INITIAL:"B",KEY:"org_box_qty"},PCS:{INITIAL:"P",KEY:"org_ea_qty"}}}get getConf(){return this.conf}set setConf(t){this.conf=t}get gateway(){for(var t=this.parent;"Gateway"!==t.constructor.name;)t=t.parent;if("Window"!==t.constructor.name)return t}get ledRect(){return this.parent.findFirst("rect")||{}}dispose(){super.dispose()}setSegmentsState(t){var e=[];(this.store.seg_role?this.store.seg_role:this.getConf.seg_role).forEach(i=>{var s;t.forEach(t=>{i==t.role&&(t.value||t.value>=0)&&(s=t.value)}),e.push(s)});var i=e.join(",");this.setState("segments",i)}jobLightOn(t,e=!0){var i,s=i=>{i.lightOff(),setTimeout(()=>{i.lightOn(t,e)},1e3*i.getConf.bf_on_delay)};"string"==typeof this.getConf.bf_on_msg&&this.getConf.bf_on_msg.length>0?((i=this).displayMessage(i.getConf.bf_on_msg,"K",!1),setTimeout(()=>{s(i)},100*i.getConf.bf_on_msg_t)):this.getConf.bf_on_delay>0?s(this):this.lightOn(t,e)}lightOn(t,e=!0){var i=parseInt(6/this.getConf.seg_role.length);switch(this.getConf.alignment){case this.alignmentOptions.LEFT:{let e=[];Object.values(this.segmentRoles).forEach(i=>{if(t[i.KEY]||t[i.KEY]>=0){var s={role:i.INITIAL,value:t[i.KEY]};e.push(s)}}),this.setSegmentsState(e)}break;case this.alignmentOptions.RIGHT:default:{let e=[];Object.values(this.segmentRoles).forEach(s=>{if(t[s.KEY]||t[s.KEY]>=0){var n={role:s.INITIAL,value:("  "+t[s.KEY]).substr(-i)};e.push(n)}}),this.setSegmentsState(e)}}t.buttonColor&&this.setState("buttonColor",String(t.buttonColor)),this.lit=e}lightOff(){this.setState("segments",3==this.displays.length?",,":","),this.setState("buttonColor","#0000"),this.lit=!1}displayMessage(t,e="K",i=!0){var s=this.displays[0].pattern.length,n=s*this.displays.length,o=t||this.getConf.bf_on_msg;switch(this.conf.alignment){case this.alignmentOptions.LEFT:o=(o+"      ").substr(0,n);break;case this.alignmentOptions.RIGHT:default:o=("      "+o).substr(-n)}for(var a=[],r=1,h=0;r<=n;)r%s==0&&(a.push(o.substr(h,s)),h=r),r++;this.setState("segments",a.join(",")),this.setState("buttonColor",this.colors[e]),this.lit=i}rectButtonContains(t,e,i,s){var n=290*i,o=15*s,a=52*i,r=24*s,h=m;return t<Math.max(n+a,n)+h&&t>Math.min(n+a,n)-h&&e<Math.max(o+r,o)+h&&e>Math.min(o+r,o)-h}mfcButtonContains(t,e,i,s){var n=7*i,o=7*s,a=96*i,r=27*s,h=(t-a)/(2*n-.5),l=(e-r)/(2*o-.5);return h*h+l*l<.25?"M":(h=(t-(a=113*i))/(2*n-.5))*h+(l=(e-(r=16*s))/(2*o-.5))*l<.25?"F":(h=(t-(a=113*i))/(2*n-.5))*h+(l=(e-(r=38*s))/(2*o-.5))*l<.25?"C":void 0}onmousedown(t,e){var i,{left:s,top:n,width:o,height:l}=this.bounds,m=o/d,c=l/g,{x:A,y:b}=this.transcoordC2S(t.offsetX,t.offsetY);if(this.rectButtonContains(A-s,b-n,m,c))r(this);else switch(this.mfcButtonContains(A-s,b-n,m,c)){case"M":!function(t){if("true"==t.state.boot_flag&&t.lit&&!t.readOnly&&t.currentTask!==t.tasks.FULL&&t.currentTask!==t.tasks.END){a("onMouseDownButton","M");var e=!!t.store.org_box_qty&&t.store.org_box_qty,i=!!t.store.org_ea_qty&&t.store.org_ea_qty,s="modify";e=Math.ceil(e/2),i=Math.ceil(i/2),s=e==t.store.org_box_qty&&i==t.store.org_ea_qty?"ok":"modify",t.gateway.passIndicatorsMessage(h(t,"IND_ON_RES",t.store,s,e,i)),t.lightOff()}}(this);break;case"F":"true"==(i=this).state.boot_flag&&i.lit&&!i.readOnly&&i.currentTask!=i.tasks.STOCK&&i.currentTask!==i.tasks.FULL&&(a("onMouseDownButton","F"),i.gateway.passIndicatorsMessage(h(i,"IND_ON_RES",i.store,"full")),i.lightOff());break;case"C":!function(t){"true"==t.state.boot_flag&&t.lit&&!t.readOnly&&t.currentTask!=t.tasks.STOCK&&t.currentTask!==t.tasks.FULL&&t.currentTask!==t.tasks.END&&(a("onMouseDownButton","C"),t.displayMessage("CAnCEL"),setTimeout(()=>{t.gateway.passIndicatorsMessage(h(t,"IND_ON_RES",t.store,"cancel",0,0)),t.lightOff()},100*t.getConf.cncl_delay))}(this)}}get displays(){var{width:t,height:e}=this.bounds,i=t/d,s=e/g,{segments:o=new Array(this.getConf.seg_role.length).join(",")}=this.state;return o.split(",",3).map((t,e,o)=>{var a=new n(63*i,28*s);return a.pattern=2==o.length?"###":3==o.length?"##":"",a.displayAngle=8,a.digitHeight=20,a.digitWidth=11,a.digitDistance=6,a.segmentWidth=1.8,a.segmentDistance=.2,a.segmentCount=n.SevenSegment,a.cornerType=n.SymmetricCorner,a.colorOn=0==e?"#007dfe":1==e?"#fd0000":"#fee400",a.colorOff="#2c2c2c",a.setValue(t),a})}_drawRectButton(t,e,i,s){var n=52*e,o=24*i,a=Math.min(7*e,7*i),r=Math.floor(a/2),h=Math.floor(a/5);n<2*a&&(a=n/2),o<2*a&&(a=o/2),t.beginPath(),t.moveTo(a,0),t.arcTo(n,0,n,o,a),t.arcTo(n,o,0,o,a),t.arcTo(0,o,0,0,a),t.arcTo(0,0,n,0,a),t.globalAlpha=1,t.fillStyle=s,t.strokeStyle=s,t.lineWidth=r,t.fill(),t.stroke(),t.strokeStyle="black",t.globalAlpha=.3,t.stroke(),t.beginPath(),t.moveTo(h,o-a),t.arcTo(h,h,a,h,a-h),t.lineTo(n-a,h),t.strokeStyle="white",t.globalAlpha=.6,t.lineWidth=h,t.stroke(),t.beginPath(),t.moveTo(n-a,h),t.arcTo(n-h,h,n-h,a,a-h),t.arcTo(n-h,o-h,n-a,o-h,a-h),t.arcTo(h,o-h,h,o-a,a-h),t.strokeStyle="white",t.globalAlpha=.4,t.lineWidth=h,t.stroke(),t.globalAlpha=1}_drawMFCButton(t,e,i){t.textAlign="center",t.textBaseline="middle",t.font=`bold ${Math.min(10*e,10*i)}px Arial`,t.beginPath(),t.ellipse(96*e,27*i,7*e,7*i,0,0,2*Math.PI),t.fillStyle="white",t.fill(),t.fillStyle="#a8a8a8",t.fillText("M",96*e,27*i),t.beginPath(),t.ellipse(113*e,16*i,7*e,7*i,0,0,2*Math.PI),t.fillStyle="white",t.fill(),t.fillStyle="#a8a8a8",t.fillText("F",113*e,16*i),t.beginPath(),t.ellipse(113*e,38*i,7*e,7*i,0,0,2*Math.PI),t.fillStyle="white",t.fill(),t.fillStyle="#a8a8a8",t.fillText("C",113*e,38*i)}_draw(t){var{left:e,top:i,width:s,height:n}=this.bounds,o=this.state.buttonColor||"#0000",a=s/d,r=n/g;t.translate(e,i),t.save(),t.beginPath(),t.drawImage(c.image,0,0,s,n),this._drawMFCButton(t,a,r);var h=this.displays,l=3==h.length?1:0;t.translate((135-12*l)*a,12*r),h[0].draw(t),h.length>=2&&(t.translate((75-25*l)*a,0),h[1].draw(t)),h.length>=3&&(t.translate((75-25*l)*a,0),h[2].draw(t)),t.beginPath(),t.restore(),t.translate(290*a,15*r),this._drawRectButton(t,a,r,o),t.beginPath()}onchangeData(t,e){var i,s;super.onchangeData(t,e),i=this,s=t.data,i.lightOn(s),i.data.dataChanged=!1}get hasTextProperty(){return!1}get controls(){}get nature(){return l}onButton(){switch(this.currentTask){case this.tasks.END:break;case this.tasks.DISPLAY:return;default:r(this)}}}i.register("indicator",c);var A="data:image/png;base64,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";for(var b,u=(function(t){var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var i=new Uint8Array(16);t.exports=function(){return e(i),i}}else{var s=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),s[e]=t>>>((3&e)<<3)&255;return s}}}(b={exports:{}},b.exports),b.exports),f=[],y=0;y<256;++y)f[y]=(y+256).toString(16).substr(1);var p=function(t,e){var i=e||0,s=f;return[s[t[i++]],s[t[i++]],s[t[i++]],s[t[i++]],"-",s[t[i++]],s[t[i++]],"-",s[t[i++]],s[t[i++]],"-",s[t[i++]],s[t[i++]],"-",s[t[i++]],s[t[i++]],s[t[i++]],s[t[i++]],s[t[i++]],s[t[i++]]].join("")};var D=function(t,e,i){var s=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var n=(t=t||{}).random||(t.rng||u)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e)for(var o=0;o<16;++o)e[s+o]=n[o];return e||p(n)},T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNBODBENUNFMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ4Rjc3QzdBMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0E4MEQ1Q0MxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0E4MEQ1Q0QxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MovTsAAAC90lEQVR42sxUS0gbURR9M5lk8lE7mSLGkITWlMZKDMGUxv5owcZFF7rN0kXdJlBwrytBXWRjF3ZjyCYbUUGhElBphUaIH6jGTxEiNVEi+RnzM5Ok902bkBhLKbjohUve5L173r3n3PuIUqmEbtNIdMtWAczlcrxHo1H+2+12CywWizQSiciamprsIpHo/cnJCdPT0yN1uVwUPnN2doYymQzvZaOu3yCRSFAgELh7eHj4OBaL6TY2NjyNjY00RVGCnZ0dZTwef/Md7OjoyNfc3Hx+Pb4CSNM0/7uysvJwcHDwLQQw+Nvj8WjFYnEeuC6srq7e39zcZMHNTqfz0dTU1Kfe3l5/dYZEWRSv14vkcrnCbDYPJBIJcflAR0dH9PT0VFIoFAi1Wp3e3d1ly3tSqfQK4pzt7e1BoVBYyyFkgRwOx7NqMGx+v5+F0sUXFxd0NRi2dDotGhsbe1kGqwE0Go24XPUfxCN+e50tLy+roEqiDnBycvLFwcEB869tEgqFGiYmJl7Xcdjd3f0umUxKBAJBCUqh/tbwBEFgDrlisUgAXVmfz/exBhC4kwBfilQqRZtMph8kSXLlwGrD56GFEMdxJIBooDs4vV4fYhgmUwOIeQBFbfv7+3Josw+tra1hvIcBQeEKEDYQCEFmjEqlsiuVyhT0rQOE4Wo4hMBSV1dXGK9nZmb0MpkMYYfp4Cchm82iYDDI/7e0tIRmZ2c7cRhUEwawQp0oUCqy2WxevB4dHX2ytramxdnt7e2hy8tLfh9E488C8L2RkZGneD00NPQVuK8QLhgeHuYX0GsI0o8DF8KFhYW2xcXFB3CzUKvVpjUazRWMJAmg7Pz8vGl6etpyfHzcAKDrfX196yAigvGsVfn8/NdYAofU9vb2c7vd/gr2SJ1Ol2BZNoezhYeDhv07+Nz4+Phng8HwBTyPvxUKxc2AW1tbCBQmW1paFPDidM7NzbWB+vz1MGLJ/v7+gNVq/QZlh/L5fBHaDd0I+P8/sLdlPwUYABIWfIdJQ71UAAAAAElFTkSuQmCC";const W=[{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNBODBENUNFMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ4Rjc3QzdBMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0E4MEQ1Q0MxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0E4MEQ1Q0QxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MovTsAAAC90lEQVR42sxUS0gbURR9M5lk8lE7mSLGkITWlMZKDMGUxv5owcZFF7rN0kXdJlBwrytBXWRjF3ZjyCYbUUGhElBphUaIH6jGTxEiNVEi+RnzM5Ok902bkBhLKbjohUve5L173r3n3PuIUqmEbtNIdMtWAczlcrxHo1H+2+12CywWizQSiciamprsIpHo/cnJCdPT0yN1uVwUPnN2doYymQzvZaOu3yCRSFAgELh7eHj4OBaL6TY2NjyNjY00RVGCnZ0dZTwef/Md7OjoyNfc3Hx+Pb4CSNM0/7uysvJwcHDwLQQw+Nvj8WjFYnEeuC6srq7e39zcZMHNTqfz0dTU1Kfe3l5/dYZEWRSv14vkcrnCbDYPJBIJcflAR0dH9PT0VFIoFAi1Wp3e3d1ly3tSqfQK4pzt7e1BoVBYyyFkgRwOx7NqMGx+v5+F0sUXFxd0NRi2dDotGhsbe1kGqwE0Go24XPUfxCN+e50tLy+roEqiDnBycvLFwcEB869tEgqFGiYmJl7Xcdjd3f0umUxKBAJBCUqh/tbwBEFgDrlisUgAXVmfz/exBhC4kwBfilQqRZtMph8kSXLlwGrD56GFEMdxJIBooDs4vV4fYhgmUwOIeQBFbfv7+3Josw+tra1hvIcBQeEKEDYQCEFmjEqlsiuVyhT0rQOE4Wo4hMBSV1dXGK9nZmb0MpkMYYfp4Cchm82iYDDI/7e0tIRmZ2c7cRhUEwawQp0oUCqy2WxevB4dHX2ytramxdnt7e2hy8tLfh9E488C8L2RkZGneD00NPQVuK8QLhgeHuYX0GsI0o8DF8KFhYW2xcXFB3CzUKvVpjUazRWMJAmg7Pz8vGl6etpyfHzcAKDrfX196yAigvGsVfn8/NdYAofU9vb2c7vd/gr2SJ1Ol2BZNoezhYeDhv07+Nz4+Phng8HwBTyPvxUKxc2AW1tbCBQmW1paFPDidM7NzbWB+vz1MGLJ/v7+gNVq/QZlh/L5fBHaDd0I+P8/sLdlPwUYABIWfIdJQ71UAAAAAElFTkSuQmCC",handler:function(t){a("onclickStart"),t.boot()}},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNBODBENUNFMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ4Rjc3QzdBMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0E4MEQ1Q0MxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0E4MEQ1Q0QxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MovTsAAAC90lEQVR42sxUS0gbURR9M5lk8lE7mSLGkITWlMZKDMGUxv5owcZFF7rN0kXdJlBwrytBXWRjF3ZjyCYbUUGhElBphUaIH6jGTxEiNVEi+RnzM5Ok902bkBhLKbjohUve5L173r3n3PuIUqmEbtNIdMtWAczlcrxHo1H+2+12CywWizQSiciamprsIpHo/cnJCdPT0yN1uVwUPnN2doYymQzvZaOu3yCRSFAgELh7eHj4OBaL6TY2NjyNjY00RVGCnZ0dZTwef/Md7OjoyNfc3Hx+Pb4CSNM0/7uysvJwcHDwLQQw+Nvj8WjFYnEeuC6srq7e39zcZMHNTqfz0dTU1Kfe3l5/dYZEWRSv14vkcrnCbDYPJBIJcflAR0dH9PT0VFIoFAi1Wp3e3d1ly3tSqfQK4pzt7e1BoVBYyyFkgRwOx7NqMGx+v5+F0sUXFxd0NRi2dDotGhsbe1kGqwE0Go24XPUfxCN+e50tLy+roEqiDnBycvLFwcEB869tEgqFGiYmJl7Xcdjd3f0umUxKBAJBCUqh/tbwBEFgDrlisUgAXVmfz/exBhC4kwBfilQqRZtMph8kSXLlwGrD56GFEMdxJIBooDs4vV4fYhgmUwOIeQBFbfv7+3Josw+tra1hvIcBQeEKEDYQCEFmjEqlsiuVyhT0rQOE4Wo4hMBSV1dXGK9nZmb0MpkMYYfp4Cchm82iYDDI/7e0tIRmZ2c7cRhUEwawQp0oUCqy2WxevB4dHX2ytramxdnt7e2hy8tLfh9E488C8L2RkZGneD00NPQVuK8QLhgeHuYX0GsI0o8DF8KFhYW2xcXFB3CzUKvVpjUazRWMJAmg7Pz8vGl6etpyfHzcAKDrfX196yAigvGsVfn8/NdYAofU9vb2c7vd/gr2SJ1Ol2BZNoezhYeDhv07+Nz4+Phng8HwBTyPvxUKxc2AW1tbCBQmW1paFPDidM7NzbWB+vz1MGLJ/v7+gNVq/QZlh/L5fBHaDd0I+P8/sLdlPwUYABIWfIdJQ71UAAAAAElFTkSuQmCC",handler:function(t){a("onclickStop"),t.off()}},{icon:T,handler:function(t){if(a("onclickStatus"),"false"==t.state.power_flag)return;var e=t.indicators[Math.floor(Math.random()*t.indicators.length)];t.publisher.data={properties:t.generateMessageProperties(),body:{action:"IND_STATUS_RPT",id:e.model.id,version:e.version,status:Math.random()>.5?"ok":"offline",rssi:Math.floor(100*Math.random()).toString(),battery:Math.floor(100*Math.random()).toString()}},a("sent IND_STATUS_RPT",t.publisher.data)}},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNBODBENUNFMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ4Rjc3QzdBMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0E4MEQ1Q0MxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0E4MEQ1Q0QxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MovTsAAAC90lEQVR42sxUS0gbURR9M5lk8lE7mSLGkITWlMZKDMGUxv5owcZFF7rN0kXdJlBwrytBXWRjF3ZjyCYbUUGhElBphUaIH6jGTxEiNVEi+RnzM5Ok902bkBhLKbjohUve5L173r3n3PuIUqmEbtNIdMtWAczlcrxHo1H+2+12CywWizQSiciamprsIpHo/cnJCdPT0yN1uVwUPnN2doYymQzvZaOu3yCRSFAgELh7eHj4OBaL6TY2NjyNjY00RVGCnZ0dZTwef/Md7OjoyNfc3Hx+Pb4CSNM0/7uysvJwcHDwLQQw+Nvj8WjFYnEeuC6srq7e39zcZMHNTqfz0dTU1Kfe3l5/dYZEWRSv14vkcrnCbDYPJBIJcflAR0dH9PT0VFIoFAi1Wp3e3d1ly3tSqfQK4pzt7e1BoVBYyyFkgRwOx7NqMGx+v5+F0sUXFxd0NRi2dDotGhsbe1kGqwE0Go24XPUfxCN+e50tLy+roEqiDnBycvLFwcEB869tEgqFGiYmJl7Xcdjd3f0umUxKBAJBCUqh/tbwBEFgDrlisUgAXVmfz/exBhC4kwBfilQqRZtMph8kSXLlwGrD56GFEMdxJIBooDs4vV4fYhgmUwOIeQBFbfv7+3Josw+tra1hvIcBQeEKEDYQCEFmjEqlsiuVyhT0rQOE4Wo4hMBSV1dXGK9nZmb0MpkMYYfp4Cchm82iYDDI/7e0tIRmZ2c7cRhUEwawQp0oUCqy2WxevB4dHX2ytramxdnt7e2hy8tLfh9E488C8L2RkZGneD00NPQVuK8QLhgeHuYX0GsI0o8DF8KFhYW2xcXFB3CzUKvVpjUazRWMJAmg7Pz8vGl6etpyfHzcAKDrfX196yAigvGsVfn8/NdYAofU9vb2c7vd/gr2SJ1Ol2BZNoezhYeDhv07+Nz4+Phng8HwBTyPvxUKxc2AW1tbCBQmW1paFPDidM7NzbWB+vz1MGLJ/v7+gNVq/QZlh/L5fBHaDd0I+P8/sLdlPwUYABIWfIdJQ71UAAAAAElFTkSuQmCC",handler:function(t){if(a("onclickError"),"false"==t.state.power_flag)return;let e=Math.random();t.publisher.data={properties:t.generateMessageProperties(),body:{action:"ERR_RPT",hw_gb:e>.5?"gw":"ind",id:e>.5?t.model.id:t.indicators[Math.floor(e*t.indicators.length*2)].model.id,message:["ERR001","ERR002","ERR003","ERR004","ERR005","ERR006"][Math.floor(6*Math.random())]}},a("sent ERR_RPT",t.publisher.data)}},{icon:T,handler:function(t){if(a("onclickTimesync"),"false"==t.state.power_flag)return;t.publisher.data={properties:t.generateMessageProperties(),body:{action:"TIMESYNC_REQ"}},a("sent TIMESYNC_REQ",t.publisher.data)}}];const C=10,w=35,E=15,v=24,M={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",name:"publisher",label:"publisher",placeholder:""},{type:"select",label:"power flag",name:"power_flag",property:{options:[{display:"true",value:"true"},{display:"false",value:"false"}]}},{type:"select",label:"boot flag",name:"boot_flag",property:{options:[{display:"true",value:"true"},{display:"false",value:"false"}]}}]};class I extends s{static get image(){return I._image||(I._image=new Image,I._image.src=A),I._image}static get buttonImages(){return I._buttonImages||(I._buttonImages=[],W.forEach(t=>{let e=new Image;e.src=t.icon,I._buttonImages.push(e)})),I._buttonImages}dispose(){this.timerOff(),delete this.timeflow,delete this.ledBlinker,delete this.ledBarBlinker,super.dispose()}buttonContains(t,e){var i=E,s=E;return W.find((n,o)=>{let a=(t-(o*w+E/2))/(2*i-.5),r=(e-E)/(2*s-.5);return a*a+r*r<.25})}passIndicatorsMessage(t){this.state.power_flag&&this.state.boot_flag&&(this.publisher.data={properties:this.generateMessageProperties(),body:t},a("sent "+(t.action?t.action:"indicator message"),this.publisher.data))}generateMessageProperties(){return{id:D(),time:Date.now(),dest_id:"mps_server",source_id:this.model.id,is_reply:!1}}generateReplyMessage(t,e,i,s){var n={properties:{id:t,time:Date.now(),dest_id:e,source_id:this.model.id,is_reply:!0},body:{action:i+"_ACK"}};switch(i){case"IND_ON_REQ":n.body={action:"IND_ON_REQ_ACK",biz_type:s.biz_type,action_type:s.action_type,ret_args:s.ret_args,read_only:s.read_only,ind_on:s.ind_on.map(t=>{let e={};return e.id=t.id,e.biz_id=t.biz_id,t.stock_taking_id&&(e.stock_taking_id=t.stock_taking_id),e})};break;case"LED_ON_REQ":case"LED_OFF_REQ":n.body={action:i+"_ACK",id:s.id}}return n}_draw(t){var{left:e,top:i,width:s,height:n}=this.bounds;t.beginPath(),t.rect(e,i,s,n),this.drawFill(t),this.drawStroke(t),t.drawImage(I.image,e+s-62-5,i+5,62,32),I.buttonImages.forEach((s,n)=>{t.beginPath(),W[n]===this._focusedButton&&(t.ellipse(C+e+n*w+v/2,C+i+v/2,E,E,0,0,2*Math.PI),t.fillStyle="lightgray",t.fill()),t.drawImage(s,C+e+n*w,C+i,v,v)})}get indicators(){var t=this.findAll("group");return 0==t.length?this.findAll("indicator"):t.map(function(t,e){return t.findFirst("indicator")})}get publisher(){return this.state.publisher?this.findById(this.state.publisher):this.findFirst("mqtt")}get timer(){return this.findFirst("seven-segment")}startBlinkingLed(){this.ledBlinker=setTimeout(()=>{this.indicators.forEach((t,e)=>{var i="true"==t.state.boot_flag&&t.lit,s=t.getConf.btn_mode===t.btnModes.BLINK,n=t.currentTask!==t.tasks.DISPLAY,o=t.currentTask==t.tasks.FULL;i&&(s&&n||t.getConf.blink_if_full&&o)&&("#0000"===t.getState("buttonColor")?t.setState("buttonColor",String(t.colors[t.store.color])||"#0000"):t.setState("buttonColor",String("#0000")))}),this.ledBlinker&&this.startBlinkingLed()},100*this.indicators[0].getConf.btn_intvl)}stopBlinkingLed(){clearTimeout(this.ledBlinker)}startBlinkingLedBar(){this.ledBarBlinker=setTimeout(()=>{this.indicators.forEach((t,e)=>{t.ledLit&&t.getConf.led_bar_mode===t.btnModes.BLINK&&("#0000"===t.ledRect.strokeStyle?t.ledRect.strokeStyle="#f00"+Math.round(15*t.getConf.led_bar_brtns/10).toString(16):t.ledRect.strokeStyle="#0000")}),this.ledBarBlinker&&this.startBlinkingLedBar()},100*this.indicators[0].getConf.led_bar_intvl)}stopBlinkingLedBar(){clearTimeout(this.ledBarBlinker)}boot(){if("true"!=this.state.boot_flag){var{indicators:t,publisher:e}=this;a("onclickStart"),this.indicators.forEach(t=>{var e=t.displays.length*t.displays[0].pattern.length;t.model.id?t.displayMessage(t.model.id):t.displayMessage(("0".repeat(e-1)+Math.floor(Math.random()*parseInt(1+"0".repeat(e)))).substr(-e))}),this.setState("power_flag","true"),e&&(e.data={properties:this.generateMessageProperties(),body:{action:"GW_INIT_REQ",id:this.model.id}}),a("sent GW_INIT_REQ",e.data)}}off(){"false"!=this.state.power_flag&&(this.timerOff(),this.stopBlinkingLed(),this.stopBlinkingLedBar(),this.setState("power_flag",String("false")),this.setState("boot_flag",String("false")),this.indicators.forEach(t=>{t.setState("boot_flag",String("false")),t.ledRect.strokeStyle="#0000",t.lightOff()}),a("turned off "+this.model.id))}setTimer(t){if(this.timer){var e=("0"+new Date(t).getHours()).substr(-2)+":"+("0"+new Date(t).getMinutes()).substr(-2)+":"+("0"+new Date(t).getSeconds()).substr(-2);this.timer.value=e}}timerOn(){}timerOff(){a(this.model.id,"timer off"),clearInterval(this.timeflow)}onchangeData(t,e){super.onchangeData(t,e),function(t,e){if("false"!=t.state.power_flag)if(e.properties.is_reply)a("server reply: ",e);else switch(a("received "+(e.body.action?e.body.action:"unknown action"),e),t.publisher.data=t.generateReplyMessage(e.properties.id,e.properties.source_id,e.body.action,e.body),a("sent reply: ",t.publisher.data),e.body.action){case"GW_INIT_RES":{if("true"==t.state.boot_flag)return void a("Already booted");t.version||(t.version=e.body.gw_version),t.setTimer(1e3*parseInt(e.body.svr_time)),t.timerOn(),t.startBlinkingLed(),t.startBlinkingLedBar(),t.publisher.data={properties:t.generateMessageProperties(),body:{action:"GW_INIT_RPT",id:t.model.id,version:t.version}},a("sent GW_INIT_RPT",t.publisher.data),t.setState("boot_flag",String("true"));let i=e&&e.body&&e.body.ind_conf,s=e&&e.body&&e.body.ind_id,n=0;t.indicators.forEach((o,r)=>{!o.model.id&&n<s.length&&!t.findById(s[n])&&(o.model.id=s[n],t.root.indexMap[o.model.id]=o,n++),o.setState("boot_flag",String("true")),o.version||(o.version=e.body.ind_version),Object.keys(i).forEach(t=>{o.conf.hasOwnProperty(t)&&(o.conf[t]=i[t])}),o.setState("segments",new Array(o.getConf.seg_role.length).join(",")),t.publisher.data={properties:t.generateMessageProperties(),body:{action:"IND_INIT_RPT",id:o.model.id,version:o.version}},a("sent IND_INIT_RPT",t.publisher.data),o.lightOff()})}break;case"IND_ON_REQ":{if("false"==t.state.boot_flag)return;let i=e&&e.body&&e.body.ind_on;i&&i.forEach(i=>{let s=t.findById(i.id);if(!s)return;if("false"==s.state.boot_flag)return;s.store=i,s.store.biz_type=e.body.biz_type,s.store.action_type=e.body.action_type,s.store.ret_args=e.body.ret_args,s.readOnly=e.body.read_only,Object.keys(s.conf).forEach(t=>{if(i.hasOwnProperty(t)){switch(t){case"seg_role":case"":return}s.conf[t]=i[t]}});let n=i.org_relay,o=i.org_box_qty,a=i.org_ea_qty,r=i.color;switch(e.body.action_type){case s.tasks.PICK:s.currentTask=s.tasks.PICK;break;case s.tasks.STOCK:s.currentTask=s.tasks.STOCK;break;case s.tasks.FULL:return s.currentTask=s.tasks.FULL,void s.displayMessage("FULL",r);case s.tasks.END:return s.currentTask=s.tasks.END,void s.displayMessage("END",r);case s.tasks.DISPLAY:s.currentTask=s.tasks.DISPLAY,r="K"}let h={};(n||n>=0)&&(h.org_relay=n),(o||o>=0)&&(h.org_box_qty=o),(a||a>=0)&&(h.org_ea_qty=a),r&&(h.buttonColor=s.colors[r]),(n||o||a||r)&&s.jobLightOn(h)})}break;case"IND_OFF_REQ":if("false"==t.state.boot_flag)return;t.indicators.forEach(i=>{if(i.currentTask==i.tasks.END&&!e.body.end_off_flag&&!e.body.force_flag)return;if(!i.getConf.off_use_res&&!i.lit)return;let s;e.body.ind_off&&(s=e.body.ind_off.find((t,e)=>t===i.model.id)),s&&(i.lightOff(),t.publisher.data={properties:t.generateMessageProperties(),body:{action:"IND_OFF_RES",id:i.model.id,result:!0}},a("sent IND_OFF_RES",t.publisher.data))});break;case"GW_DEP_REQ":{if("false"==t.state.boot_flag)return;let i=!1;Math.random()>.5&&(e.body.ind_url,t.version=e.body.version,i=!0),t.publisher.data={properties:t.generateMessageProperties(),body:{action:"GW_DEP_RES",id:t.model.id,result:i,version:t.version,time:Date.now()}},a("sent GW_DEP_RES",t.publisher.data),t.off(),t.boot()}break;case"IND_DEP_REQ":if("false"==t.state.boot_flag)return;t.indicators.forEach(i=>{if(0==i.state.boot_flag)return;let s;Math.random()>.5?(i.version=e.body.version,s=!0):s=!1,t.publisher.data={properties:t.generateMessageProperties(),body:{action:"IND_DEP_RES",id:i.model.id,result:s,version:i.version,time:Date.now()}},a("sent IND_DEP_RES",t.publisher.data)}),t.off(),t.boot();break;case"TIMESYNC_RES":if("false"==t.state.boot_flag)return;t.setTimer(1e3*parseInt(e.body.svr_time)),t.time||t.timerOn();break;case"MW_MOD_IP_REQ":t.publisher.data={properties:t.generateMessageProperties(),body:{action:"MW_MOD_IP_RES",id:t.model.id,result:Math.random()>.5}};break;case"LED_ON_REQ":{let i=t.indicators.findIndex((t,i)=>t.model.id===e.body.id);if(-1!=i){Object.keys(t.indicators[i].conf).forEach(s=>{e.body.hasOwnProperty(s)&&(t.indicators[i].conf[s]=e.body[s])});let s="#f00";t.indicators[i].getConf.led_bar_brtns>10&&(t.indicators[i].conf.led_bar_brtns=10),s+=Math.round(15*t.indicators[i].getConf.led_bar_brtns/10).toString(16),t.indicators[i].ledRect.strokeStyle=s,t.indicators[i].ledLit=!0}else a("Could not find indicator",e.body.id)}break;case"LED_OFF_REQ":{let i=t.indicators.findIndex((t,i)=>t.model.id===e.body.id);-1!=i?(t.indicators[i].ledRect.strokeStyle="#0000",t.indicators[i].ledLit=!1):a("Could not find indicator",e.body.id)}break;default:a("unknown message",e)}else a("got a message when power is off",e)}(this,t.data)}onmousedown(t,e){var{left:i,top:s,width:n,height:o}=this.bounds,{x:a,y:r}=this.transcoordC2S(t.offsetX,t.offsetY),h=this.buttonContains(a-i-C,r-s-C);h&&h.handler(this)}onmousemove(t,e){var{left:i,top:s,width:n,height:o}=this.bounds,{x:a,y:r}=this.transcoordC2S(t.offsetX,t.offsetY),h=this._focusedButton;this._focusedButton=this.buttonContains(a-i-C,r-s-C),this._focusedButton!==h&&this.invalidate()}get hasTextProperty(){return!1}get controls(){}get nature(){return M}}i.register("gateway",I);const R={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"value",name:"value",placeholder:"12:34:56"},{type:"string",label:"pattern",name:"pattern",placeholder:"##:##:##"},{type:"number",label:"digit height",name:"digitHeight",placeholder:"20"},{type:"number",label:"digit width",name:"digitWidth",placeholder:"10"},{type:"number",label:"digit distance",name:"digitDistance",placeholder:"2.5"},{type:"number",label:"display angle",name:"displayAngle",placeholder:"12"},{type:"number",label:"segment width",name:"segmentWidth",placeholder:"2.5"},{type:"number",label:"segment distance",name:"segmentDistance",placeholder:"0.2"},{type:"select",label:"segment count",name:"segmentCount",property:{options:[{display:7,value:7},{display:14,value:14},{display:16,value:16}]}},{type:"select",label:"corner type",name:"cornerType",property:{options:[{display:"SymmetricCorner",value:0},{display:"SquaredCorner",value:1},{display:"RoundedCorner",value:2}]}},{type:"color",label:"color-on",name:"colorOn"},{type:"color",label:"color-off",name:"colorOff"}],"value-property":"value"};i.register("seven-segment",class extends(t(e)){_draw(t){var{top:e,left:i,height:s,width:o,pattern:a="##:##:##",value:r="12:34:56",digitHeight:h=20,digitWidth:l=10,digitDistance:d=2.5,displayAngle:g=12,segmentWidth:m=2.5,segmentDistance:c=.2,segmentCount:A=n.SevenSegment,cornerType:b=n.RoundedCorner,colorOn:u="rgb(233, 93, 15)",colorOff:f="rgb(75, 30, 5)"}=this.state,y=new n(o,s);y.pattern=a,y.displayAngle=g,y.digitHeight=h,y.digitWidth=l,y.digitDistance=d,y.segmentWidth=m,y.segmentDistance=c,y.segmentCount=A,y.cornerType=b,y.colorOn=u,y.colorOff=f,y.setValue(String(r)),t.translate(i,e),y.draw(t),t.beginPath()}get nature(){return R}});var B="data:image/png;base64,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";const N=[{icon:B,handler:function(t){if(a("onclickBoot"),!t.data)return;var e=t.data;for(let i=0;i<e.length;i++)t.publisher.data={properties:{id:D(),time:Date.now(),dest_id:"mps_server",source_id:e[i],is_reply:!1},body:{action:"GW_INIT_REQ",id:e[i]}},a("sent GW_INIT_REQ",t.publisher.data)}}],S=10,Y={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",name:"publisher",label:"publisher"}]};class Q extends(t(e)){static get image(){return Q._image||(Q._image=new Image,Q._image.src=B),Q._image}get publisher(){if(this.state.publisher)return this.root.indexMap[this.state.publisher]}_draw(t){var{left:e,top:i,width:s,height:n}=this.bounds;t.beginPath(),t.rect(e,i,s,n),this.drawFill(t),this.drawStroke(t),t.drawImage(Q.image,e,i,s,n)}onmousedown(t,e){var{left:i,top:s,width:n,height:o}=this.bounds,{x:a,y:r}=this.transcoordC2S(t.offsetX,t.offsetY),h=this.buttonContains(a-i-S,r-s-S);h&&h.handler(this)}buttonContains(t,e){return N[0]}get nature(){return Y}}i.register("boot-button",Q);var O="data:image/png;base64,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";const k=[{icon:O,handler:function(t){a("onClickReply"),t.root.findAll("gateway").forEach((t,e)=>{t.indicators.forEach(t=>{t.onButton()})})}}],G={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",name:"publisher",label:"publisher"}]};class P extends(t(e)){static get image(){return P._image||(P._image=new Image,P._image.src=O),P._image}get publisher(){if(this.state.publisher)return this.root.indexMap[this.state.publisher]}_draw(t){var{left:e,top:i,width:s,height:n}=this.bounds;t.beginPath(),t.rect(e,i,s,n),this.drawFill(t),this.drawStroke(t),t.drawImage(P.image,e,i,s,n)}onmousedown(t,e){var i=this.buttonContains();i&&i.handler(this)}buttonContains(){return k[0]}get nature(){return G}}i.register("reply-button",P);const H={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"select",name:"switch",label:"Switch",placeholder:"false",property:{options:[{display:"OFF",value:"false"},{display:"ON",value:"true"}]}},{type:"string",name:"target",label:"target",placeholder:""},{type:"number",name:"interval",label:"interval",placeholder:0}]};i.register("auto-clicker",class extends(t(e)){dispose(){clearInterval(this.autoClicker),delete this.autoClicker,super.dispose()}_draw(t){var{left:e,top:i,width:s,height:n}=this.bounds;t.beginPath(),t.rect(e,i,s,n),this.drawFill(t),this.drawStroke(t)}onmousedown(t,e){var i=()=>{this.autoClicker=setTimeout(()=>{o.onmousedown(t,e),i()},n)},s={true:!0,false:!1}[this.getState("switch")],n=this.getState("interval"),o=this.root.findById(this.getState("target"));this.setState("switch",!s),s=!s,this.text=s?"ON":"OFF",this.fontColor=s?"rgb(0, 173, 31)":"rgb(254, 3, 3)",a("Auto response:",s),s&&o&&n>=1e3?i():clearTimeout(this.autoClicker)}get nature(){return H}});
