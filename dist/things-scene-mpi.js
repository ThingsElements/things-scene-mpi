!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=23)}([function(t,e,i){"use strict";function n(){}Object.defineProperty(e,"__esModule",{value:!0}),e.consoleLogger=n,e.onmessage=function(t,e){if("false"==t.state.power_flag)return;if(!e.properties.is_reply)switch(e.body.action&&e.body.action,t.publisher.data=t.generateReplyMessage(e.properties.id,e.properties.source_id,e.body.action,e.body),t.publisher.data,e.body.action){case"GW_INIT_RES":if("true"==t.state.boot_flag)return;t.version||(t.version=e.body.gw_version),t.setTimer(e.body.svr_time),t.timerOn(),t.publisher.data={properties:t.generateMessageProperties(),body:{action:"GW_INIT_RPT",id:t.model.id,version:t.version}},t.publisher.data,t.setState("boot_flag",String("true"));var i=e&&e.body&&e.body.ind_conf,n=0;t.indicators.forEach(function(o,s){var r=o;switch(r.model.id||t.findById(i[n].id)||(r.model.id=i[n].id,t.root.indexMap[r.model.id]=r,n++),r.setState("boot_flag",String("true")),r.version||(r.version=e.body.ind_version),o.led_type){case r.ledTypes.BLINK:r.setState("led_type",String(r.ledTypes.BLINK));break;case r.ledTypes.ALWAYS:default:r.setState("led_type",String(r.ledTypes.ALWAYS))}t.publisher.data={properties:t.generateMessageProperties(),body:{action:"IND_INIT_RPT",id:r.model.id,version:r.version}},t.publisher.data,r.lightOff()});break;case"IND_ON_REQ":if("false"==t.state.boot_flag)return;t.indicators.forEach(function(t){t.lightOff()});var i=e&&e.body&&e.body.ind_on;i&&i.forEach(function(i){var n=t.findById(i.id);if(n&&"false"!=n.state.boot_flag){switch(n.store=i,n.store.biz_type=e.body.biz_type,n.store.action_type=e.body.action_type,n.setState("org_box_qty",String(("00"+i.org_box_qty).substr(-3))),n.setState("org_ea_qty",String(("00"+i.org_ea_qty).substr(-3))),n.setState("buttonColor",String(n.colors[i.color]||"black")),e.body.action_type){case n.tasks.PICK:n.currentTask=n.tasks.PICK;break;case n.tasks.STOCK:n.currentTask=n.tasks.STOCK}n.lit=!0}});break;case"IND_OFF_REQ":if("false"==t.state.boot_flag)return;t.indicators.forEach(function(e){e.setState("org_box_qty",String("")),e.setState("org_ea_qty",String("")),e.setState("buttonColor",String("black")),e.lit=!1,t.publisher.data={properties:t.generateMessageProperties(),body:{action:"IND_OFF_RES",id:e.model.id,result:!0}},t.publisher.data});break;case"GW_DEP_REQ":if("false"==t.state.boot_flag)return;var o=!1,s=Math.random();s>.5&&(e.body.ind_url,t.version=e.body.version,o=!0),t.publisher.data={properties:t.generateMessageProperties(),body:{action:"GW_DEP_RES",id:t.model.id,result:o,version:t.version,time:Date.now()}},t.publisher.data,t.off(),t.boot();break;case"IND_DEP_REQ":if("false"==t.state.boot_flag)return;t.indicators.forEach(function(i){if(0!=i.state.boot_flag){var n=void 0;Math.random()>.5?(i.version=e.body.version,n=!0):n=!1,t.publisher.data={properties:t.generateMessageProperties(),body:{action:"IND_DEP_RES",id:i.model.id,result:n,version:i.version,time:Date.now()}},t.publisher.data}}),t.off(),t.boot();break;case"TIMESYNC_RES":if("false"==t.state.boot_flag)return;t.setTimer(e.body.svr_time),t.time||t.timerOn();break;case"MW_MOD_IP_REQ":t.publisher.data={properties:t.generateMessageProperties(),body:{action:"MW_MOD_IP_RES",id:t.model.id,result:Math.random()>.5}};break;default:console.log("unknown message",e)}}},function(t,e){t.exports=scene},function(t,e,i){"use strict";function n(t,e){this.width=t,this.height=e,this.pattern="##:##:##",this.value="12:34:56",this.digitHeight=20,this.digitWidth=10,this.digitDistance=2.5,this.displayAngle=12,this.segmentWidth=2.5,this.segmentDistance=.2,this.segmentCount=n.SevenSegment,this.cornerType=n.RoundedCorner,this.colorOn="rgb(233, 93, 15)",this.colorOff="rgb(75, 30, 5)"}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,
/*!
 * segment-display.js
 *
 * Copyright 2012, RÃ¼diger Appel
 * http://www.3quarks.com
 * Published under Creative Commons 3.0 License.
 *
 * Date: 2012-02-14
 * Version: 1.0.0
 *
 * Dokumentation: http://www.3quarks.com/de/Segmentanzeige
 * Documentation: http://www.3quarks.com/en/SegmentDisplay
 */
n.SevenSegment=7,n.FourteenSegment=14,n.SixteenSegment=16,n.SymmetricCorner=0,n.SquaredCorner=1,n.RoundedCorner=2,n.prototype.setValue=function(t){this.value=t},n.prototype.draw=function(t){var e=0,i=!0;if(this.pattern)for(var n=0;n<this.pattern.length;n++){var o=this.pattern.charAt(n).toLowerCase();if("#"==o)e+=this.digitWidth;else if("."==o||":"==o)e+=this.segmentWidth;else if(" "!=o)return;e+=i?0:this.digitDistance,i=!1}if(!(e<=0)){var s=-1*Math.max(-45,Math.min(45,this.displayAngle)),r=Math.tan(s*Math.PI/180),a=Math.min(this.width/(e+Math.abs(r*this.digitHeight)),this.height/this.digitHeight),h=(this.width-(e+r*this.digitHeight)*a)/2,l=(this.height-this.digitHeight*a)/2;t.save(),t.translate(h,l),t.scale(a,a),t.transform(1,0,r,1,0,0);var d=0,g=this.value?this.value.length:0;for(n=0;n<this.pattern.length;n++){var c=this.pattern.charAt(n),u=n<g?this.value.charAt(n).toLowerCase():" ";d+=this.drawDigit(t,d,c,u)}t.restore()}},n.prototype.drawDigit=function(t,e,i,o){switch(i){case"#":var s=Math.sqrt(this.segmentWidth*this.segmentWidth/2),r=Math.sqrt(this.segmentDistance*this.segmentDistance/2),a=r/2,h=(this.segmentWidth-r)*Math.sin(45*Math.PI/180),l=h/2,d=(this.digitHeight-3*this.segmentWidth)/2,g=(this.digitWidth-3*this.segmentWidth)/2,c=this.segmentWidth/2,u=this.digitWidth/2;if(16==this.segmentCount){var m=e,f=0;switch(t.fillStyle=this.getSegmentColor(o,null,"02356789abcdefgiopqrstz@%"),t.beginPath(),this.cornerType){case n.SymmetricCorner:t.moveTo(m+c+r,f+c),t.lineTo(m+this.segmentWidth+r,f);break;case n.SquaredCorner:t.moveTo(m+c+a,f+c-a),t.lineTo(m+this.segmentWidth,f);break;default:t.moveTo(m+this.segmentWidth-h,f+this.segmentWidth-h-r),t.quadraticCurveTo(m+this.segmentWidth-l,f,m+this.segmentWidth,f)}t.lineTo(m+u-r-c,f),t.lineTo(m+u-r,f+c),t.lineTo(m+u-r-c,f+this.segmentWidth),t.lineTo(m+this.segmentWidth+r,f+this.segmentWidth),t.fill();m=e,f=0;switch(t.fillStyle=this.getSegmentColor(o,null,"02356789abcdefgiopqrstz@"),t.beginPath(),t.moveTo(m+this.digitWidth-this.segmentWidth-r,f+this.segmentWidth),t.lineTo(m+u+r+c,f+this.segmentWidth),t.lineTo(m+u+r,f+c),t.lineTo(m+u+r+c,f),this.cornerType){case n.SymmetricCorner:t.lineTo(m+this.digitWidth-this.segmentWidth-r,f),t.lineTo(m+this.digitWidth-c-r,f+c);break;case n.SquaredCorner:t.lineTo(m+this.digitWidth-this.segmentWidth,f),t.lineTo(m+this.digitWidth-c-a,f+c-a);break;default:t.lineTo(m+this.digitWidth-this.segmentWidth,f),t.quadraticCurveTo(m+this.digitWidth-this.segmentWidth+l,f,m+this.digitWidth-this.segmentWidth+h,f+this.segmentWidth-h-r)}t.fill()}else{m=e,f=0;switch(t.fillStyle=this.getSegmentColor(o,"02356789acefp","02356789abcdefgiopqrstz@"),t.beginPath(),this.cornerType){case n.SymmetricCorner:t.moveTo(m+c+r,f+c),t.lineTo(m+this.segmentWidth+r,f),t.lineTo(m+this.digitWidth-this.segmentWidth-r,f),t.lineTo(m+this.digitWidth-c-r,f+c);break;case n.SquaredCorner:t.moveTo(m+c+a,f+c-a),t.lineTo(m+this.segmentWidth,f),t.lineTo(m+this.digitWidth-this.segmentWidth,f),t.lineTo(m+this.digitWidth-c-a,f+c-a);break;default:t.moveTo(m+this.segmentWidth-h,f+this.segmentWidth-h-r),t.quadraticCurveTo(m+this.segmentWidth-l,f,m+this.segmentWidth,f),t.lineTo(m+this.digitWidth-this.segmentWidth,f),t.quadraticCurveTo(m+this.digitWidth-this.segmentWidth+l,f,m+this.digitWidth-this.segmentWidth+h,f+this.segmentWidth-h-r)}t.lineTo(m+this.digitWidth-this.segmentWidth-r,f+this.segmentWidth),t.lineTo(m+this.segmentWidth+r,f+this.segmentWidth),t.fill()}switch(m=e+this.digitWidth-this.segmentWidth,f=0,t.fillStyle=this.getSegmentColor(o,"01234789adhpy","01234789abdhjmnopqruwy"),t.beginPath(),this.cornerType){case n.SymmetricCorner:t.moveTo(m+c,f+c+r),t.lineTo(m+this.segmentWidth,f+this.segmentWidth+r);break;case n.SquaredCorner:t.moveTo(m+c+a,f+c+a),t.lineTo(m+this.segmentWidth,f+this.segmentWidth);break;default:t.moveTo(m+h+r,f+this.segmentWidth-h),t.quadraticCurveTo(m+this.segmentWidth,f+this.segmentWidth-l,m+this.segmentWidth,f+this.segmentWidth)}switch(t.lineTo(m+this.segmentWidth,f+d+this.segmentWidth-r),t.lineTo(m+c,f+d+this.segmentWidth+c-r),t.lineTo(m,f+d+this.segmentWidth-r),t.lineTo(m,f+this.segmentWidth+r),t.fill(),m=e+this.digitWidth-this.segmentWidth,f=d+this.segmentWidth,t.fillStyle=this.getSegmentColor(o,"013456789abdhnouy","01346789abdghjmnoqsuw@","%"),t.beginPath(),t.moveTo(m,f+this.segmentWidth+r),t.lineTo(m+c,f+c+r),t.lineTo(m+this.segmentWidth,f+this.segmentWidth+r),t.lineTo(m+this.segmentWidth,f+d+this.segmentWidth-r),this.cornerType){case n.SymmetricCorner:t.lineTo(m+c,f+d+this.segmentWidth+c-r),t.lineTo(m,f+d+this.segmentWidth-r);break;case n.SquaredCorner:t.lineTo(m+c+a,f+d+this.segmentWidth+c-a),t.lineTo(m,f+d+this.segmentWidth-r);break;default:t.quadraticCurveTo(m+this.segmentWidth,f+d+this.segmentWidth+l,m+h+r,f+d+this.segmentWidth+h),t.lineTo(m,f+d+this.segmentWidth-r)}if(t.fill(),16==this.segmentCount){switch(m=e,f=this.digitHeight-this.segmentWidth,t.fillStyle=this.getSegmentColor(o,null,"0235689bcdegijloqsuz_=@"),t.beginPath(),t.moveTo(m+this.segmentWidth+r,f),t.lineTo(m+u-r-c,f),t.lineTo(m+u-r,f+c),t.lineTo(m+u-r-c,f+this.segmentWidth),this.cornerType){case n.SymmetricCorner:t.lineTo(m+this.segmentWidth+r,f+this.segmentWidth),t.lineTo(m+c+r,f+c);break;case n.SquaredCorner:t.lineTo(m+this.segmentWidth,f+this.segmentWidth),t.lineTo(m+c+a,f+c+a);break;default:t.lineTo(m+this.segmentWidth,f+this.segmentWidth),t.quadraticCurveTo(m+this.segmentWidth-l,f+this.segmentWidth,m+this.segmentWidth-h,f+h+r),t.lineTo(m+this.segmentWidth-h,f+h+r)}switch(t.fill(),m=e,f=this.digitHeight-this.segmentWidth,t.fillStyle=this.getSegmentColor(o,null,"0235689bcdegijloqsuz_=@","%"),t.beginPath(),t.moveTo(m+u+r+c,f+this.segmentWidth),t.lineTo(m+u+r,f+c),t.lineTo(m+u+r+c,f),t.lineTo(m+this.digitWidth-this.segmentWidth-r,f),this.cornerType){case n.SymmetricCorner:t.lineTo(m+this.digitWidth-c-r,f+c),t.lineTo(m+this.digitWidth-this.segmentWidth-r,f+this.segmentWidth);break;case n.SquaredCorner:t.lineTo(m+this.digitWidth-c-a,f+c+a),t.lineTo(m+this.digitWidth-this.segmentWidth,f+this.segmentWidth);break;default:t.lineTo(m+this.digitWidth-this.segmentWidth+h,f+h+r),t.quadraticCurveTo(m+this.digitWidth-this.segmentWidth+l,f+this.segmentWidth,m+this.digitWidth-this.segmentWidth,f+this.segmentWidth)}t.fill()}else{switch(m=e,f=this.digitHeight-this.segmentWidth,t.fillStyle=this.getSegmentColor(o,"0235689bcdelotuy_","0235689bcdegijloqsuz_=@"),t.beginPath(),t.moveTo(m+this.segmentWidth+r,f),t.lineTo(m+this.digitWidth-this.segmentWidth-r,f),this.cornerType){case n.SymmetricCorner:t.lineTo(m+this.digitWidth-c-r,f+c),t.lineTo(m+this.digitWidth-this.segmentWidth-r,f+this.segmentWidth),t.lineTo(m+this.segmentWidth+r,f+this.segmentWidth),t.lineTo(m+c+r,f+c);break;case n.SquaredCorner:t.lineTo(m+this.digitWidth-c-a,f+c+a),t.lineTo(m+this.digitWidth-this.segmentWidth,f+this.segmentWidth),t.lineTo(m+this.segmentWidth,f+this.segmentWidth),t.lineTo(m+c+a,f+c+a);break;default:t.lineTo(m+this.digitWidth-this.segmentWidth+h,f+h+r),t.quadraticCurveTo(m+this.digitWidth-this.segmentWidth+l,f+this.segmentWidth,m+this.digitWidth-this.segmentWidth,f+this.segmentWidth),t.lineTo(m+this.segmentWidth,f+this.segmentWidth),t.quadraticCurveTo(m+this.segmentWidth-l,f+this.segmentWidth,m+this.segmentWidth-h,f+h+r),t.lineTo(m+this.segmentWidth-h,f+h+r)}t.fill()}switch(m=e,f=d+this.segmentWidth,t.fillStyle=this.getSegmentColor(o,"0268abcdefhlnoprtu","0268acefghjklmnopqruvw@"),t.beginPath(),t.moveTo(m,f+this.segmentWidth+r),t.lineTo(m+c,f+c+r),t.lineTo(m+this.segmentWidth,f+this.segmentWidth+r),t.lineTo(m+this.segmentWidth,f+d+this.segmentWidth-r),this.cornerType){case n.SymmetricCorner:t.lineTo(m+c,f+d+this.segmentWidth+c-r),t.lineTo(m,f+d+this.segmentWidth-r);break;case n.SquaredCorner:t.lineTo(m+c-a,f+d+this.segmentWidth+c-r+a),t.lineTo(m,f+d+this.segmentWidth);break;default:t.lineTo(m+this.segmentWidth-h-r,f+d+this.segmentWidth+h),t.quadraticCurveTo(m,f+d+this.segmentWidth+l,m,f+d+this.segmentWidth)}switch(t.fill(),m=e,f=0,t.fillStyle=this.getSegmentColor(o,"045689abcefhlpty","045689acefghklmnopqrsuvwy@","%"),t.beginPath(),t.moveTo(m+this.segmentWidth,f+this.segmentWidth+r),t.lineTo(m+this.segmentWidth,f+d+this.segmentWidth-r),t.lineTo(m+c,f+d+this.segmentWidth+c-r),t.lineTo(m,f+d+this.segmentWidth-r),this.cornerType){case n.SymmetricCorner:t.lineTo(m,f+this.segmentWidth+r),t.lineTo(m+c,f+c+r);break;case n.SquaredCorner:t.lineTo(m,f+this.segmentWidth),t.lineTo(m+c-a,f+c+a);break;default:t.lineTo(m,f+this.segmentWidth),t.quadraticCurveTo(m,f+this.segmentWidth-l,m+this.segmentWidth-h-r,f+this.segmentWidth-h),t.lineTo(m+this.segmentWidth-h-r,f+this.segmentWidth-h)}return t.fill(),7==this.segmentCount&&(m=e,f=(this.digitHeight-this.segmentWidth)/2,t.fillStyle=this.getSegmentColor(o,"2345689abdefhnoprty-="),t.beginPath(),t.moveTo(m+c+r,f+c),t.lineTo(m+this.segmentWidth+r,f),t.lineTo(m+this.digitWidth-this.segmentWidth-r,f),t.lineTo(m+this.digitWidth-c-r,f+c),t.lineTo(m+this.digitWidth-this.segmentWidth-r,f+this.segmentWidth),t.lineTo(m+this.segmentWidth+r,f+this.segmentWidth),t.fill()),7!=this.segmentCount&&(m=e,f=(this.digitHeight-this.segmentWidth)/2,t.fillStyle=this.getSegmentColor(o,null,"2345689aefhkprsy-+*=","%"),t.beginPath(),t.moveTo(m+c+r,f+c),t.lineTo(m+this.segmentWidth+r,f),t.lineTo(m+u-r-c,f),t.lineTo(m+u-r,f+c),t.lineTo(m+u-r-c,f+this.segmentWidth),t.lineTo(m+this.segmentWidth+r,f+this.segmentWidth),t.fill(),m=e,f=(this.digitHeight-this.segmentWidth)/2,t.fillStyle=this.getSegmentColor(o,null,"234689abefghprsy-+*=@","%"),t.beginPath(),t.moveTo(m+u+r,f+c),t.lineTo(m+u+r+c,f),t.lineTo(m+this.digitWidth-this.segmentWidth-r,f),t.lineTo(m+this.digitWidth-c-r,f+c),t.lineTo(m+this.digitWidth-this.segmentWidth-r,f+this.segmentWidth),t.lineTo(m+u+r+c,f+this.segmentWidth),t.fill(),m=e+u-c,f=0,t.fillStyle=this.getSegmentColor(o,null,"bdit+*","%"),t.beginPath(),14==this.segmentCount?(t.moveTo(m,f+this.segmentWidth+this.segmentDistance),t.lineTo(m+this.segmentWidth,f+this.segmentWidth+this.segmentDistance)):(t.moveTo(m,f+this.segmentWidth+r),t.lineTo(m+c,f+c+r),t.lineTo(m+this.segmentWidth,f+this.segmentWidth+r)),t.lineTo(m+this.segmentWidth,f+d+this.segmentWidth-r),t.lineTo(m+c,f+d+this.segmentWidth+c-r),t.lineTo(m,f+d+this.segmentWidth-r),t.fill(),m=e+u-c,f=this.digitHeight,t.fillStyle=this.getSegmentColor(o,null,"bdity+*@","%"),t.beginPath(),14==this.segmentCount?(t.moveTo(m,f-this.segmentWidth-this.segmentDistance),t.lineTo(m+this.segmentWidth,f-this.segmentWidth-this.segmentDistance)):(t.moveTo(m,f-this.segmentWidth-r),t.lineTo(m+c,f-c-r),t.lineTo(m+this.segmentWidth,f-this.segmentWidth-r)),t.lineTo(m+this.segmentWidth,f-d-this.segmentWidth+r),t.lineTo(m+c,f-d-this.segmentWidth-c+r),t.lineTo(m,f-d-this.segmentWidth+r),t.fill(),m=e+this.segmentWidth,f=this.segmentWidth,t.fillStyle=this.getSegmentColor(o,null,"mnx\\*"),t.beginPath(),t.moveTo(m+this.segmentDistance,f+this.segmentDistance),t.lineTo(m+this.segmentDistance+s,f+this.segmentDistance),t.lineTo(m+g-this.segmentDistance,f+d-this.segmentDistance-s),t.lineTo(m+g-this.segmentDistance,f+d-this.segmentDistance),t.lineTo(m+g-this.segmentDistance-s,f+d-this.segmentDistance),t.lineTo(m+this.segmentDistance,f+this.segmentDistance+s),t.fill(),m=e+g+2*this.segmentWidth,f=this.segmentWidth,t.fillStyle=this.getSegmentColor(o,null,"0kmvxz/*","%"),t.beginPath(),t.moveTo(m+g-this.segmentDistance,f+this.segmentDistance),t.lineTo(m+g-this.segmentDistance,f+this.segmentDistance+s),t.lineTo(m+this.segmentDistance+s,f+d-this.segmentDistance),t.lineTo(m+this.segmentDistance,f+d-this.segmentDistance),t.lineTo(m+this.segmentDistance,f+d-this.segmentDistance-s),t.lineTo(m+g-this.segmentDistance-s,f+this.segmentDistance),t.fill(),m=e+g+2*this.segmentWidth,f=d+2*this.segmentWidth,t.fillStyle=this.getSegmentColor(o,null,"5knqrwx\\*"),t.beginPath(),t.moveTo(m+this.segmentDistance,f+this.segmentDistance),t.lineTo(m+this.segmentDistance+s,f+this.segmentDistance),t.lineTo(m+g-this.segmentDistance,f+d-this.segmentDistance-s),t.lineTo(m+g-this.segmentDistance,f+d-this.segmentDistance),t.lineTo(m+g-this.segmentDistance-s,f+d-this.segmentDistance),t.lineTo(m+this.segmentDistance,f+this.segmentDistance+s),t.fill(),m=e+this.segmentWidth,f=d+2*this.segmentWidth,t.fillStyle=this.getSegmentColor(o,null,"0vwxz/*","%"),t.beginPath(),t.moveTo(m+g-this.segmentDistance,f+this.segmentDistance),t.lineTo(m+g-this.segmentDistance,f+this.segmentDistance+s),t.lineTo(m+this.segmentDistance+s,f+d-this.segmentDistance),t.lineTo(m+this.segmentDistance,f+d-this.segmentDistance),t.lineTo(m+this.segmentDistance,f+d-this.segmentDistance-s),t.lineTo(m+g-this.segmentDistance-s,f+this.segmentDistance),t.fill()),this.digitDistance+this.digitWidth;case".":return t.fillStyle="#"==o||"."==o?this.colorOn:this.colorOff,this.drawPoint(t,e,this.digitHeight-this.segmentWidth,this.segmentWidth),this.digitDistance+this.segmentWidth;case":":t.fillStyle="#"==o||":"==o?this.colorOn:this.colorOff;f=(this.digitHeight-this.segmentWidth)/2-this.segmentWidth;return this.drawPoint(t,e,f,this.segmentWidth),this.drawPoint(t,e,f+2*this.segmentWidth,this.segmentWidth),this.digitDistance+this.segmentWidth;default:return this.digitDistance}},n.prototype.drawPoint=function(t,e,i,n){var o=e+n,s=i+n,r=n/4;t.beginPath(),t.moveTo(o-r,i),t.quadraticCurveTo(o,i,o,i+r),t.lineTo(o,s-r),t.quadraticCurveTo(o,s,o-r,s),t.lineTo(e+r,s),t.quadraticCurveTo(e,s,e,s-r),t.lineTo(e,i+r),t.quadraticCurveTo(e,i,e+r,i),t.fill()},n.prototype.getSegmentColor=function(t,e,i,n){if("#"==t)return this.colorOn;switch(this.segmentCount){case 7:return-1==e.indexOf(t)?this.colorOff:this.colorOn;case 14:return-1==i.indexOf(t)?this.colorOff:this.colorOn;case 16:return-1==(i+(void 0===n?"":n)).indexOf(t)?this.colorOff:this.colorOn;default:return this.colorOff}}},function(t,e){t.exports="data:image/png;base64,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"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buttons=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1),r=i(3),a=(n=r)&&n.__esModule?n:{default:n},h=i(0);var l=e.buttons=[{icon:a.default,handler:function(t){(0,h.consoleLogger)("onClickReply"),t.root.findAll("gateway").forEach(function(t,e){t.indicators.forEach(function(t){t.onButton()})})}}],d={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",name:"publisher",label:"publisher"}]},g=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,s.RectPath)(s.Shape)),o(e,[{key:"render",value:function(t){var i=this.bounds,n=i.left,o=i.top,s=i.width,r=i.height;t.beginPath(),t.rect(n,o,s,r),this.drawFill(t),this.drawStroke(t),t.drawImage(e.image,n,o,s,r)}},{key:"onmousedown",value:function(t,e){var i=this.bounds,n=i.left,o=i.top,s=(i.width,i.height,this.transcoordC2S(t.offsetX,t.offsetY)),r=s.x,a=s.y,h=this.buttonContains(r-n-10,a-o-10);h&&h.handler(this)}},{key:"buttonContains",value:function(t,e){return l[0]}},{key:"publisher",get:function(){if(this.state.publisher)return this.root.indexMap[this.state.publisher]}},{key:"nature",get:function(){return d}}],[{key:"image",get:function(){return e._image||(e._image=new Image,e._image.src=a.default),e._image}}]),e}();e.default=g,s.Component.register("reply-button",g)},function(t,e,i){t.exports=i.p+"assets/boot-button.99c433e8.png"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buttons=void 0;var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1),r=i(5),a=(n=r)&&n.__esModule?n:{default:n},h=i(0);var l=e.buttons=[{icon:a.default,handler:function(t){if((0,h.consoleLogger)("onclickBoot"),!t.data)return;for(var e=t.data,i=0;i<e.length;i++)t.publisher.data={properties:{id:([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}),time:Date.now(),dest_id:"mps_server",source_id:e[i],is_reply:!1},body:{action:"GW_INIT_REQ",id:e[i].split("/")[3]}},(0,h.consoleLogger)("sent GW_INIT_REQ",t.publisher.data)}}],d={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",name:"publisher",label:"publisher"}]},g=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,s.RectPath)(s.Shape)),o(e,[{key:"render",value:function(t){var i=this.bounds,n=i.left,o=i.top,s=i.width,r=i.height;t.beginPath(),t.rect(n,o,s,r),this.drawFill(t),this.drawStroke(t),t.drawImage(e.image,n,o,s,r)}},{key:"onmousedown",value:function(t,e){var i=this.bounds,n=i.left,o=i.top,s=(i.width,i.height,this.transcoordC2S(t.offsetX,t.offsetY)),r=s.x,a=s.y,h=this.buttonContains(r-n-10,a-o-10);h&&h.handler(this)}},{key:"buttonContains",value:function(t,e){return l[0]}},{key:"publisher",get:function(){if(this.state.publisher)return this.root.indexMap[this.state.publisher]}},{key:"nature",get:function(){return d}}],[{key:"image",get:function(){return e._image||(e._image=new Image,e._image.src=a.default),e._image}}]),e}();e.default=g,s.Component.register("boot-button",g)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1),r=i(2),a=(n=r)&&n.__esModule?n:{default:n};var h={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"value",name:"value",placeholder:"12:34:56"},{type:"string",label:"pattern",name:"pattern",placeholder:"##:##:##"},{type:"number",label:"digit height",name:"digitHeight",placeholder:"20"},{type:"number",label:"digit width",name:"digitWidth",placeholder:"10"},{type:"number",label:"digit distance",name:"digitDistance",placeholder:"2.5"},{type:"number",label:"display angle",name:"displayAngle",placeholder:"12"},{type:"number",label:"segment width",name:"segmentWidth",placeholder:"2.5"},{type:"number",label:"segment distance",name:"segmentDistance",placeholder:"0.2"},{type:"select",label:"segment count",name:"segmentCount",property:{options:[{display:7,value:7},{display:14,value:14},{display:16,value:16}]}},{type:"select",label:"corner type",name:"cornerType",property:{options:[{display:"SymmetricCorner",value:0},{display:"SquaredCorner",value:1},{display:"RoundedCorner",value:2}]}},{type:"color",label:"color-on",name:"colorOn"},{type:"color",label:"color-off",name:"colorOff"}],"value-property":"value"},l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,s.RectPath)(s.Shape)),o(e,[{key:"render",value:function(t){var e=this.state,i=e.top,n=e.left,o=e.height,s=e.width,r=e.pattern,h=void 0===r?"##:##:##":r,l=e.value,d=void 0===l?"12:34:56":l,g=e.digitHeight,c=void 0===g?20:g,u=e.digitWidth,m=void 0===u?10:u,f=e.digitDistance,b=void 0===f?2.5:f,p=e.displayAngle,y=void 0===p?12:p,v=e.segmentWidth,W=void 0===v?2.5:v,T=e.segmentDistance,A=void 0===T?.2:T,w=e.segmentCount,M=void 0===w?a.default.SevenSegment:w,S=e.cornerType,C=void 0===S?a.default.RoundedCorner:S,D=e.colorOn,N=void 0===D?"rgb(233, 93, 15)":D,E=e.colorOff,I=void 0===E?"rgb(75, 30, 5)":E,k=new a.default(s,o);k.pattern=h,k.displayAngle=y,k.digitHeight=c,k.digitWidth=m,k.digitDistance=b,k.segmentWidth=W,k.segmentDistance=A,k.segmentCount=M,k.cornerType=C,k.colorOn=N,k.colorOff=I,k.setValue(String(d)),t.translate(n,i),k.draw(t),t.beginPath()}},{key:"nature",get:function(){return h}}]),e}();e.default=l,s.Component.register("seven-segment",l)},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNBODBENUNFMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ4Rjc3QzdBMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0E4MEQ1Q0MxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0E4MEQ1Q0QxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MovTsAAAC90lEQVR42sxUS0gbURR9M5lk8lE7mSLGkITWlMZKDMGUxv5owcZFF7rN0kXdJlBwrytBXWRjF3ZjyCYbUUGhElBphUaIH6jGTxEiNVEi+RnzM5Ok902bkBhLKbjohUve5L173r3n3PuIUqmEbtNIdMtWAczlcrxHo1H+2+12CywWizQSiciamprsIpHo/cnJCdPT0yN1uVwUPnN2doYymQzvZaOu3yCRSFAgELh7eHj4OBaL6TY2NjyNjY00RVGCnZ0dZTwef/Md7OjoyNfc3Hx+Pb4CSNM0/7uysvJwcHDwLQQw+Nvj8WjFYnEeuC6srq7e39zcZMHNTqfz0dTU1Kfe3l5/dYZEWRSv14vkcrnCbDYPJBIJcflAR0dH9PT0VFIoFAi1Wp3e3d1ly3tSqfQK4pzt7e1BoVBYyyFkgRwOx7NqMGx+v5+F0sUXFxd0NRi2dDotGhsbe1kGqwE0Go24XPUfxCN+e50tLy+roEqiDnBycvLFwcEB869tEgqFGiYmJl7Xcdjd3f0umUxKBAJBCUqh/tbwBEFgDrlisUgAXVmfz/exBhC4kwBfilQqRZtMph8kSXLlwGrD56GFEMdxJIBooDs4vV4fYhgmUwOIeQBFbfv7+3Josw+tra1hvIcBQeEKEDYQCEFmjEqlsiuVyhT0rQOE4Wo4hMBSV1dXGK9nZmb0MpkMYYfp4Cchm82iYDDI/7e0tIRmZ2c7cRhUEwawQp0oUCqy2WxevB4dHX2ytramxdnt7e2hy8tLfh9E488C8L2RkZGneD00NPQVuK8QLhgeHuYX0GsI0o8DF8KFhYW2xcXFB3CzUKvVpjUazRWMJAmg7Pz8vGl6etpyfHzcAKDrfX196yAigvGsVfn8/NdYAofU9vb2c7vd/gr2SJ1Ol2BZNoezhYeDhv07+Nz4+Phng8HwBTyPvxUKxc2AW1tbCBQmW1paFPDidM7NzbWB+vz1MGLJ/v7+gNVq/QZlh/L5fBHaDd0I+P8/sLdlPwUYABIWfIdJQ71UAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNBODBENUNFMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ4Rjc3QzdBMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0E4MEQ1Q0MxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0E4MEQ1Q0QxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MovTsAAAC90lEQVR42sxUS0gbURR9M5lk8lE7mSLGkITWlMZKDMGUxv5owcZFF7rN0kXdJlBwrytBXWRjF3ZjyCYbUUGhElBphUaIH6jGTxEiNVEi+RnzM5Ok902bkBhLKbjohUve5L173r3n3PuIUqmEbtNIdMtWAczlcrxHo1H+2+12CywWizQSiciamprsIpHo/cnJCdPT0yN1uVwUPnN2doYymQzvZaOu3yCRSFAgELh7eHj4OBaL6TY2NjyNjY00RVGCnZ0dZTwef/Md7OjoyNfc3Hx+Pb4CSNM0/7uysvJwcHDwLQQw+Nvj8WjFYnEeuC6srq7e39zcZMHNTqfz0dTU1Kfe3l5/dYZEWRSv14vkcrnCbDYPJBIJcflAR0dH9PT0VFIoFAi1Wp3e3d1ly3tSqfQK4pzt7e1BoVBYyyFkgRwOx7NqMGx+v5+F0sUXFxd0NRi2dDotGhsbe1kGqwE0Go24XPUfxCN+e50tLy+roEqiDnBycvLFwcEB869tEgqFGiYmJl7Xcdjd3f0umUxKBAJBCUqh/tbwBEFgDrlisUgAXVmfz/exBhC4kwBfilQqRZtMph8kSXLlwGrD56GFEMdxJIBooDs4vV4fYhgmUwOIeQBFbfv7+3Josw+tra1hvIcBQeEKEDYQCEFmjEqlsiuVyhT0rQOE4Wo4hMBSV1dXGK9nZmb0MpkMYYfp4Cchm82iYDDI/7e0tIRmZ2c7cRhUEwawQp0oUCqy2WxevB4dHX2ytramxdnt7e2hy8tLfh9E488C8L2RkZGneD00NPQVuK8QLhgeHuYX0GsI0o8DF8KFhYW2xcXFB3CzUKvVpjUazRWMJAmg7Pz8vGl6etpyfHzcAKDrfX196yAigvGsVfn8/NdYAofU9vb2c7vd/gr2SJ1Ol2BZNoezhYeDhv07+Nz4+Phng8HwBTyPvxUKxc2AW1tbCBQmW1paFPDidM7NzbWB+vz1MGLJ/v7+gNVq/QZlh/L5fBHaDd0I+P8/sLdlPwUYABIWfIdJQ71UAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNBODBENUNFMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ4Rjc3QzdBMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0E4MEQ1Q0MxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0E4MEQ1Q0QxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MovTsAAAC90lEQVR42sxUS0gbURR9M5lk8lE7mSLGkITWlMZKDMGUxv5owcZFF7rN0kXdJlBwrytBXWRjF3ZjyCYbUUGhElBphUaIH6jGTxEiNVEi+RnzM5Ok902bkBhLKbjohUve5L173r3n3PuIUqmEbtNIdMtWAczlcrxHo1H+2+12CywWizQSiciamprsIpHo/cnJCdPT0yN1uVwUPnN2doYymQzvZaOu3yCRSFAgELh7eHj4OBaL6TY2NjyNjY00RVGCnZ0dZTwef/Md7OjoyNfc3Hx+Pb4CSNM0/7uysvJwcHDwLQQw+Nvj8WjFYnEeuC6srq7e39zcZMHNTqfz0dTU1Kfe3l5/dYZEWRSv14vkcrnCbDYPJBIJcflAR0dH9PT0VFIoFAi1Wp3e3d1ly3tSqfQK4pzt7e1BoVBYyyFkgRwOx7NqMGx+v5+F0sUXFxd0NRi2dDotGhsbe1kGqwE0Go24XPUfxCN+e50tLy+roEqiDnBycvLFwcEB869tEgqFGiYmJl7Xcdjd3f0umUxKBAJBCUqh/tbwBEFgDrlisUgAXVmfz/exBhC4kwBfilQqRZtMph8kSXLlwGrD56GFEMdxJIBooDs4vV4fYhgmUwOIeQBFbfv7+3Josw+tra1hvIcBQeEKEDYQCEFmjEqlsiuVyhT0rQOE4Wo4hMBSV1dXGK9nZmb0MpkMYYfp4Cchm82iYDDI/7e0tIRmZ2c7cRhUEwawQp0oUCqy2WxevB4dHX2ytramxdnt7e2hy8tLfh9E488C8L2RkZGneD00NPQVuK8QLhgeHuYX0GsI0o8DF8KFhYW2xcXFB3CzUKvVpjUazRWMJAmg7Pz8vGl6etpyfHzcAKDrfX196yAigvGsVfn8/NdYAofU9vb2c7vd/gr2SJ1Ol2BZNoezhYeDhv07+Nz4+Phng8HwBTyPvxUKxc2AW1tbCBQmW1paFPDidM7NzbWB+vz1MGLJ/v7+gNVq/QZlh/L5fBHaDd0I+P8/sLdlPwUYABIWfIdJQ71UAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNBODBENUNFMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ4Rjc3QzdBMTg0NDExRThBMDc0QUZGM0Y1MTQwNzhDIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6M0E4MEQ1Q0MxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6M0E4MEQ1Q0QxODQ0MTFFOEEwNzRBRkYzRjUxNDA3OEMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MovTsAAAC90lEQVR42sxUS0gbURR9M5lk8lE7mSLGkITWlMZKDMGUxv5owcZFF7rN0kXdJlBwrytBXWRjF3ZjyCYbUUGhElBphUaIH6jGTxEiNVEi+RnzM5Ok902bkBhLKbjohUve5L173r3n3PuIUqmEbtNIdMtWAczlcrxHo1H+2+12CywWizQSiciamprsIpHo/cnJCdPT0yN1uVwUPnN2doYymQzvZaOu3yCRSFAgELh7eHj4OBaL6TY2NjyNjY00RVGCnZ0dZTwef/Md7OjoyNfc3Hx+Pb4CSNM0/7uysvJwcHDwLQQw+Nvj8WjFYnEeuC6srq7e39zcZMHNTqfz0dTU1Kfe3l5/dYZEWRSv14vkcrnCbDYPJBIJcflAR0dH9PT0VFIoFAi1Wp3e3d1ly3tSqfQK4pzt7e1BoVBYyyFkgRwOx7NqMGx+v5+F0sUXFxd0NRi2dDotGhsbe1kGqwE0Go24XPUfxCN+e50tLy+roEqiDnBycvLFwcEB869tEgqFGiYmJl7Xcdjd3f0umUxKBAJBCUqh/tbwBEFgDrlisUgAXVmfz/exBhC4kwBfilQqRZtMph8kSXLlwGrD56GFEMdxJIBooDs4vV4fYhgmUwOIeQBFbfv7+3Josw+tra1hvIcBQeEKEDYQCEFmjEqlsiuVyhT0rQOE4Wo4hMBSV1dXGK9nZmb0MpkMYYfp4Cchm82iYDDI/7e0tIRmZ2c7cRhUEwawQp0oUCqy2WxevB4dHX2ytramxdnt7e2hy8tLfh9E488C8L2RkZGneD00NPQVuK8QLhgeHuYX0GsI0o8DF8KFhYW2xcXFB3CzUKvVpjUazRWMJAmg7Pz8vGl6etpyfHzcAKDrfX196yAigvGsVfn8/NdYAofU9vb2c7vd/gr2SJ1Ol2BZNoezhYeDhv07+Nz4+Phng8HwBTyPvxUKxc2AW1tbCBQmW1paFPDidM7NzbWB+vz1MGLJ/v7+gNVq/QZlh/L5fBHaDd0I+P8/sLdlPwUYABIWfIdJQ71UAAAAAElFTkSuQmCC"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buttons=void 0;var n=h(i(11)),o=h(i(10)),s=h(i(9)),r=h(i(8)),a=i(0);function h(t){return t&&t.__esModule?t:{default:t}}e.buttons=[{icon:n.default,handler:function(t){(0,a.consoleLogger)("onclickStart"),t.boot()}},{icon:o.default,handler:function(t){(0,a.consoleLogger)("onclickStop"),t.off()}},{icon:s.default,handler:function(t){if((0,a.consoleLogger)("onclickStatus"),"false"==t.state.power_flag)return;var e=t.indicators[Math.floor(Math.random()*t.indicators.length)];t.publisher.data={properties:t.generateMessageProperties(),body:{action:"IND_STATUS_RPT",id:e.model.id,version:e.version,status:Math.random()>.5?"ok":"offline"}},(0,a.consoleLogger)("sent IND_STATUS_RPT",t.publisher.data)}},{icon:r.default,handler:function(t){if((0,a.consoleLogger)("onclickError"),"false"==t.state.power_flag)return;var e=Math.random();t.publisher.data={properties:t.generateMessageProperties(),body:{action:"ERR_RPT",hw_gb:e>.5?"gw":"ind",id:e>.5?t.model.id:t.indicators[Math.floor(e*t.indicators.length*2)].model.id,message:["ERR001","ERR002","ERR003","ERR004","ERR005","ERR006"][Math.floor(6*Math.random())]}},(0,a.consoleLogger)("sent ERR_RPT",t.publisher.data)}},{icon:s.default,handler:function(t){if((0,a.consoleLogger)("onclickTimesync"),"false"==t.state.power_flag)return;t.publisher.data={properties:t.generateMessageProperties(),body:{action:"TIMESYNC_REQ"}},(0,a.consoleLogger)("sent TIMESYNC_REQ",t.publisher.data)}}]},function(t,e){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,o=i;return o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]}},function(t,e){var i="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(i){var n=new Uint8Array(16);t.exports=function(){return i(n),n}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e,i){var n=i(14),o=i(13);t.exports=function(t,e,i){var s=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||n)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var a=0;a<16;++a)e[s+a]=r[a];return e||o(r)}},function(t,e){t.exports="data:image/png;base64,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"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(n):void 0},s=i(1),r=d(i(16)),a=d(i(15)),h=i(12),l=i(0);function d(t){return t&&t.__esModule?t:{default:t}}var g={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",name:"publisher",label:"publisher"},{type:"string",name:"timer",label:"timer"},{type:"string",label:"power-flag",name:"power_flag"},{type:"string",label:"boot-flag",name:"boot_flag"}]},c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.Container),n(e,[{key:"dispose",value:function(){this.timerOff(),delete this.timeflow,o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this)}},{key:"buttonContains",value:function(t,e){return h.buttons.find(function(i,n){var o=(t-(35*n+7.5))/29.5,s=(e-15)/29.5;return o*o+s*s<.25})}},{key:"passIndicatorsMessage",value:function(t){this.state.power_flag&&this.state.boot_flag&&(this.publisher.data={properties:this.generateMessageProperties(),body:t},(0,l.consoleLogger)("sent "+(t.action?t.action:"indicator message"),this.publisher.data))}},{key:"generateMessageProperties",value:function(){return{id:(0,a.default)(),time:Date.now(),dest_id:"mps_server",source_id:this.model.id,is_reply:!1}}},{key:"generateReplyMessage",value:function(t,e,i,n){var o={properties:{id:t,time:Date.now(),dest_id:e,source_id:this.model.id,is_reply:!0},body:{action:i+"_ACK"}};return"IND_ON_REQ"==i&&(o.body={action:"IND_ON_REQ_ACK",biz_type:n.biz_type,action_type:n.action_type,ind_on:n.ind_on.map(function(t){var e={};return e.id=t.id,e.biz_id=t.biz_id,t.stock_taking_id&&(e.stock_taking_id=t.stock_taking_id),e})}),o}},{key:"render",value:function(t){var i=this,n=this.bounds,o=n.left,s=n.top,r=n.width,a=n.height;t.beginPath(),t.rect(o,s,r,a),this.drawFill(t),this.drawStroke(t),t.drawImage(e.image,o+r-62-5,s+5,62,32),e.buttonImages.forEach(function(e,n){t.beginPath(),h.buttons[n]===i._focusedButton&&(t.ellipse(10+o+35*n+12,10+s+12,15,15,0,0,2*Math.PI),t.fillStyle="lightgray",t.fill()),t.drawImage(e,10+o+35*n,10+s,24,24)})}},{key:"boot",value:function(){if("true"!=this.state.boot_flag){this.indicators;var t=this.publisher;(0,l.consoleLogger)("onclickStart"),this.indicators.forEach(function(t){t.setState("org_box_qty",String(("00"+Math.floor(1e3*Math.random())).substr(-3))),t.setState("org_ea_qty",String(("00"+Math.floor(1e3*Math.random())).substr(-3))),t.setState("buttonColor",String("white"))}),this.setState("power_flag","true"),t&&(t.data={properties:this.generateMessageProperties(),body:{action:"GW_INIT_REQ",id:this.model.id.split("/")[this.model.id.split("/").length-1]}}),(0,l.consoleLogger)("sent GW_INIT_REQ",t.data)}}},{key:"off",value:function(){"false"!=this.state.power_flag&&(this.timerOff(),this.setState("power_flag",String("false")),this.setState("boot_flag",String("false")),this.indicators.forEach(function(t){t.setState("boot_flag",String("false")),t.lightOff()}),(0,l.consoleLogger)("turned off "+this.model.id))}},{key:"setTimer",value:function(t){if(this.timer){var e=("0"+new Date(t).getHours()).substr(-2)+":"+("0"+new Date(t).getMinutes()).substr(-2)+":"+("0"+new Date(t).getSeconds()).substr(-2);this.timer.value=e}}},{key:"timerOn",value:function(){}},{key:"timerOff",value:function(){(0,l.consoleLogger)(this.model.id,"timer off"),clearInterval(this.timeflow)}},{key:"onchangeData",value:function(t,i){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onchangeData",this).call(this,t,i),(0,l.onmessage)(this,t.data)}},{key:"onmousedown",value:function(t,e){var i=this.bounds,n=i.left,o=i.top,s=(i.width,i.height,this.transcoordC2S(t.offsetX,t.offsetY)),r=s.x,a=s.y,h=this.buttonContains(r-n-10,a-o-10);h&&h.handler(this)}},{key:"onmousemove",value:function(t,e){var i=this.bounds,n=i.left,o=i.top,s=(i.width,i.height,this.transcoordC2S(t.offsetX,t.offsetY)),r=s.x,a=s.y,h=this._focusedButton;this._focusedButton=this.buttonContains(r-n-10,a-o-10),this._focusedButton!==h&&this.invalidate()}},{key:"indicators",get:function(){return this.findAll("indicator")}},{key:"publisher",get:function(){if(this.state.publisher)return this.findById(this.state.publisher)}},{key:"timer",get:function(){return!!this.state.timer&&this.findById(this.state.timer)}},{key:"hasTextProperty",get:function(){return!1}},{key:"controls",get:function(){}},{key:"nature",get:function(){return g}}],[{key:"image",get:function(){return e._image||(e._image=new Image,e._image.src=r.default),e._image}},{key:"buttonImages",get:function(){return e._buttonImages||(e._buttonImages=[],h.buttons.forEach(function(t){var i=new Image;i.src=t.icon,e._buttonImages.push(i)})),e._buttonImages}}]),e}();e.default=c,s.Component.register("gateway",c)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onmessage=function(t,e){console.log("onmessage",e),t.setState("org_box_qty",String(e.org_box_qty)),t.setState("org_ea_qty",String(e.org_ea_qty)),t.setState("buttonColor",String(e.color))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onMouseDownMButton=function(t){if("true"!=t.state.boot_flag||!t.lit)return;(0,n.consoleLogger)("onMouseDownButton","M");var e=Math.round(t.store.org_box_qty*Math.random()),i=Math.round(t.store.org_ea_qty*Math.random());t.parent.passIndicatorsMessage(o(t,"IND_ON_RES",t.store,"ok",t.currentTask==t.tasks.STOCK?2*e:e,t.currentTask==t.tasks.STOCK?2*i:i)),t.lightOff()},e.onMouseDownFButton=function(t){if("true"!=t.state.boot_flag||!t.lit||t.currentTask==t.tasks.STOCK)return;(0,n.consoleLogger)("onMouseDownButton","F"),t.parent.passIndicatorsMessage(o(t,"IND_ON_RES",t.store,"full")),t.lightOff()},e.onMouseDownCButton=function(t){if("true"!=t.state.boot_flag||!t.lit||t.currentTask==t.tasks.STOCK)return;(0,n.consoleLogger)("onMouseDownButton","C"),t.parent.passIndicatorsMessage(o(t,"IND_ON_RES",t.store,"cancel",0,0)),t.lightOff()},e.onMouseDownBigButton=function(t){if("true"!=t.state.boot_flag||!t.lit)return;(0,n.consoleLogger)("onMouseDownBigButton"),t.parent.passIndicatorsMessage(o(t,"IND_ON_RES",t.store,"ok")),t.lightOff()};var n=i(0);var o=function(t,e,i,n,o,s){var r=t.state,a=r.org_box_qty,h=r.org_ea_qty,l={action:e,id:t.model.id,biz_id:i?i.biz_id:void 0,biz_type:i.biz_type,action_type:i.action_type,biz_flag:n,org_box_qty:i?parseInt(i.org_box_qty):0,org_ea_qty:i?parseInt(i.org_ea_qty):0,res_box_qty:o||parseInt(a),res_ea_qty:s||parseInt(h)};return i.stock_taking_id&&(l.stock_taking_id=i.stock_taking_id),l}},function(t,e,i){t.exports=i.p+"assets/indicator.ca3e32c2.png"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in o)return o.value;var r=o.get;return void 0!==r?r.call(n):void 0},s=i(1),r=d(i(2)),a=d(i(20)),h=i(19),l=i(18);function d(t){return t&&t.__esModule?t:{default:t}}var g={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"org-box-qty",name:"org_box_qty"},{type:"string",label:"org-ea-qty",name:"org_ea_qty"},{type:"string",label:"led-type",name:"led-type"},{type:"select",label:"button color",name:"buttonColor",property:{options:[{display:"WHITE",value:"white"},{display:"GREEN",value:"green"},{display:"RED",value:"red"},{display:"BLUE",value:"blue"}]}},{type:"select",label:"boot-flag",name:"boot_flag",property:{options:[{display:"TRUE",value:"true"},{display:"FALSE",value:"false"}]}}]},c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,s.RectPath)(s.Shape)),n(e,[{key:"dispose",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"dispose",this).call(this)}},{key:"lightOff",value:function(){this.setState("org_box_qty",""),this.setState("org_ea_qty",""),this.setState("buttonColor","black"),this.lit=!1}},{key:"rectButtonContains",value:function(t,e,i,n){var o=290*i,s=15*n,r=52*i,a=24*n;return t<Math.max(o+r,o)+3&&t>Math.min(o+r,o)-3&&e<Math.max(s+a,s)+3&&e>Math.min(s+a,s)-3}},{key:"mfcButtonContains",value:function(t,e,i,n){var o=7*i,s=7*n,r=96*i,a=27*n,h=(t-r)/(2*o-.5),l=(e-a)/(2*s-.5);return h*h+l*l<.25?"M":(h=(t-(r=113*i))/(2*o-.5))*h+(l=(e-(a=16*n))/(2*s-.5))*l<.25?"F":(h=(t-(r=113*i))/(2*o-.5))*h+(l=(e-(a=38*n))/(2*s-.5))*l<.25?"C":void 0}},{key:"onmousedown",value:function(t,e){var i=this.bounds,n=i.left,o=i.top,s=i.width/449,r=i.height/53,a=this.transcoordC2S(t.offsetX,t.offsetY),l=a.x,d=a.y;if(this.rectButtonContains(l-n,d-o,s,r))(0,h.onMouseDownBigButton)(this);else switch(this.mfcButtonContains(l-n,d-o,s,r)){case"M":(0,h.onMouseDownMButton)(this);break;case"F":(0,h.onMouseDownFButton)(this);break;case"C":(0,h.onMouseDownCButton)(this)}}},{key:"_drawRectButton",value:function(t,e,i,n){var o=52*e,s=24*i,r=Math.min(7*e,7*i),a=Math.floor(r/2),h=Math.floor(r/5);o<2*r&&(r=o/2),s<2*r&&(r=s/2),t.beginPath(),t.moveTo(r,0),t.arcTo(o,0,o,s,r),t.arcTo(o,s,0,s,r),t.arcTo(0,s,0,0,r),t.arcTo(0,0,o,0,r),t.globalAlpha=1,t.fillStyle=n,t.strokeStyle=n,t.lineWidth=a,t.fill(),t.stroke(),t.strokeStyle="black",t.globalAlpha=.3,t.stroke(),t.beginPath(),t.moveTo(h,s-r),t.arcTo(h,h,r,h,r-h),t.lineTo(o-r,h),t.strokeStyle="white",t.globalAlpha=.6,t.lineWidth=h,t.stroke(),t.beginPath(),t.moveTo(o-r,h),t.arcTo(o-h,h,o-h,r,r-h),t.arcTo(o-h,s-h,o-r,s-h,r-h),t.arcTo(h,s-h,h,s-r,r-h),t.strokeStyle="white",t.globalAlpha=.4,t.lineWidth=h,t.stroke(),t.globalAlpha=1}},{key:"_drawMFCButton",value:function(t,e,i){t.textAlign="center",t.textBaseline="middle",t.font="bold "+Math.min(10*e,10*i)+"px Arial",t.beginPath(),t.ellipse(96*e,27*i,7*e,7*i,0,0,2*Math.PI),t.fillStyle="white",t.fill(),t.fillStyle="#a8a8a8",t.fillText("M",96*e,27*i),t.beginPath(),t.ellipse(113*e,16*i,7*e,7*i,0,0,2*Math.PI),t.fillStyle="white",t.fill(),t.fillStyle="#a8a8a8",t.fillText("F",113*e,16*i),t.beginPath(),t.ellipse(113*e,38*i,7*e,7*i,0,0,2*Math.PI),t.fillStyle="white",t.fill(),t.fillStyle="#a8a8a8",t.fillText("C",113*e,38*i)}},{key:"render",value:function(t){var i=this.bounds,n=i.left,o=i.top,s=i.width,r=i.height,a=this.state.buttonColor||"black",h=s/449,l=r/53;t.translate(n,o),t.save(),t.beginPath(),t.drawImage(e.image,0,0,s,r),this._drawMFCButton(t,h,l);var d=this.displays;t.translate(135*h,12*l),d[0].draw(t),t.translate(75*h,0),d[1].draw(t),t.beginPath(),t.restore(),t.translate(290*h,15*l),this._drawRectButton(t,h,l,a),t.beginPath()}},{key:"onchangeData",value:function(t,i){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"onchangeData",this).call(this,t,i),(0,l.onmessage)(this,t.data)}},{key:"onButton",value:function(){(0,h.onMouseDownMButton)(this)}},{key:"colors",get:function(){return{R:"red",G:"green",B:"blue",W:"white"}}},{key:"ledTypes",get:function(){return{BLINK:"blink",ALWAYS:"always"}}},{key:"tasks",get:function(){return{PICK:"pick",STOCK:"stock"}}},{key:"displays",get:function(){var t=this.bounds,e=t.width/449,i=t.height/53,n=this.state,o=n.org_box_qty,s=void 0===o?"":o,a=n.org_ea_qty;return[s,void 0===a?"":a].map(function(t,n){var o=new r.default(63*e,28*i);return o.pattern="###",o.displayAngle=8,o.digitHeight=20,o.digitWidth=11,o.digitDistance=6,o.segmentWidth=1.8,o.segmentDistance=.2,o.segmentCount=r.default.SevenSegment,o.cornerType=r.default.SymmetricCorner,o.colorOn=n?"#fd0000":"#007dfe",o.colorOff="#2c2c2c",o.setValue(t),o})}},{key:"hasTextProperty",get:function(){return!1}},{key:"controls",get:function(){}},{key:"nature",get:function(){return g}}],[{key:"image",get:function(){return e._image||(e._image=new Image,e._image.src=a.default),e._image}}]),e}();e.default=c,s.Component.register("indicator",c)},function(t,e,i){"use strict";i(21),i(17),i(7),i(6),i(4)},function(t,e,i){t.exports=i(22)}]);
//# sourceMappingURL=things-scene-mpi.js.map